import{a as Qe,q as gt,s as _t}from"./displayArea-3420d60b.js";import{o as C,c as x,a as l,u as y,g as yt,b as wt,r as T,d as Ct,w as bt,i as ge,e as We,h as Ie,f as At,j as re,k as A,l as D,p as xt,m as Ke,n as ie,q as qe,s as St,t as Je,v as ne,x as O,y as $,z as M,A as fe,B as It,C as q,D as F,F as Z,E as Ee,G as Et,H as L,T as Tt,I as he,J as Te,K as Lt,L as Q,M as Ot,N as _e,O as ye,P as oe,Q as $t,R as we,S as U,U as Ze,V as Mt,W as Pt}from"./index-6a155e43.js";function Nt(e,t){return window.viewer.imageryLayers.addImageryProvider(new Cesium.WebMapServiceImageryProvider({url:e,layers:t,alpha:0,parameters:{service:"WMS",format:"image/png",transparent:!0},show:!1}))}let Le;function Rt(){const e=window.viewer.imageryLayers.indexOf(Le);e==-1?Le=Nt("http://172.27.101.19:8080/geoserver/dongjiang/wms","dongjiang:dongjiang_reservoirs_total"):window.viewer.imageryLayers.get(e).show=!window.viewer.imageryLayers.get(e).show}let Oe="";function Dt(){const e=window.viewer.imageryLayers.indexOf(Oe);e==-1?Oe=window.viewer.imageryLayers.addImageryProvider(new Cesium.WebMapTileServiceImageryProvider({url:"http://{s}.tianditu.gov.cn/cia_c/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=cia&tileMatrixSet=c&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default&format=tiles&tk=a5ef217ac65d9c8323d15a22f98c5c66",layer:"tdtCva",style:"default",format:"tiles",tileMatrixSetID:"c",subdomains:["t0","t1","t2","t3","t4","t5","t6","t7"],tilingScheme:new Cesium.GeographicTilingScheme,tileMatrixLabels:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],maximumLevel:18})):window.viewer.imageryLayers.get(e).show=!window.viewer.imageryLayers.get(e).show}let z;function Ft(e,t,n=!0){return function(){if(z&&clearTimeout(z),n){var o=!z;z=setTimeout(()=>{z=null},t),o&&e.apply(this,arguments)}else z=setTimeout(function(){e.apply(context,args)},t)}}const X=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n},jt={class:"layout-tool-template modelToolBar"},kt={__name:"loadRiver",setup(e){return(t,n)=>(C(),x("div",jt,[l("button",{onClick:n[0]||(n[0]=o=>y(Dt)())},"地图标注"),l("button",{onClick:n[1]||(n[1]=o=>y(Rt)())},"显示水库")]))}},Bt=X(kt,[["__scopeId","data-v-3997a247"]]);var $e;const le=typeof window<"u",zt=e=>typeof e=="string",Ut=()=>{};le&&(($e=window==null?void 0:window.navigator)!=null&&$e.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Ce(e){return typeof e=="function"?e():y(e)}function Ht(e){return e}function Ye(e){return yt()?(wt(e),!0):!1}function Gt(e,t,n={}){const{immediate:o=!0}=n,s=T(!1);let a=null;function f(){a&&(clearTimeout(a),a=null)}function c(){s.value=!1,f()}function m(..._){f(),s.value=!0,a=setTimeout(()=>{s.value=!1,a=null,e(..._)},Ce(t))}return o&&(s.value=!0,le&&m()),Ye(c),{isPending:Ct(s),start:m,stop:c}}function Vt(e){var t;const n=Ce(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Qt=le?window:void 0;function Wt(...e){let t,n,o,s;if(zt(e[0])||Array.isArray(e[0])?([n,o,s]=e,t=Qt):[t,n,o,s]=e,!t)return Ut;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],f=()=>{a.forEach(g=>g()),a.length=0},c=(g,v,b,S)=>(g.addEventListener(v,b,S),()=>g.removeEventListener(v,b,S)),m=bt(()=>[Vt(t),Ce(s)],([g,v])=>{f(),g&&a.push(...n.flatMap(b=>o.map(S=>c(g,b,S,v))))},{immediate:!0,flush:"post"}),_=()=>{m(),f()};return Ye(_),_}const Me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pe="__vueuse_ssr_handlers__";Me[Pe]=Me[Pe]||{};var Ne;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(Ne||(Ne={}));var Kt=Object.defineProperty,Re=Object.getOwnPropertySymbols,qt=Object.prototype.hasOwnProperty,Jt=Object.prototype.propertyIsEnumerable,De=(e,t,n)=>t in e?Kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zt=(e,t)=>{for(var n in t||(t={}))qt.call(t,n)&&De(e,n,t[n]);if(Re)for(var n of Re(t))Jt.call(t,n)&&De(e,n,t[n]);return e};const Yt={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Zt({linear:Ht},Yt);var Xt=typeof global=="object"&&global&&global.Object===Object&&global;const en=Xt;var tn=typeof self=="object"&&self&&self.Object===Object&&self,nn=en||tn||Function("return this")();const be=nn;var on=be.Symbol;const H=on;var Xe=Object.prototype,an=Xe.hasOwnProperty,sn=Xe.toString,W=H?H.toStringTag:void 0;function rn(e){var t=an.call(e,W),n=e[W];try{e[W]=void 0;var o=!0}catch{}var s=sn.call(e);return o&&(t?e[W]=n:delete e[W]),s}var ln=Object.prototype,cn=ln.toString;function un(e){return cn.call(e)}var dn="[object Null]",pn="[object Undefined]",Fe=H?H.toStringTag:void 0;function et(e){return e==null?e===void 0?pn:dn:Fe&&Fe in Object(e)?rn(e):un(e)}function fn(e){return e!=null&&typeof e=="object"}var hn="[object Symbol]";function Ae(e){return typeof e=="symbol"||fn(e)&&et(e)==hn}function mn(e,t){for(var n=-1,o=e==null?0:e.length,s=Array(o);++n<o;)s[n]=t(e[n],n,e);return s}var vn=Array.isArray;const xe=vn;var gn=1/0,je=H?H.prototype:void 0,ke=je?je.toString:void 0;function tt(e){if(typeof e=="string")return e;if(xe(e))return mn(e,tt)+"";if(Ae(e))return ke?ke.call(e):"";var t=e+"";return t=="0"&&1/e==-gn?"-0":t}function nt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var _n="[object AsyncFunction]",yn="[object Function]",wn="[object GeneratorFunction]",Cn="[object Proxy]";function bn(e){if(!nt(e))return!1;var t=et(e);return t==yn||t==wn||t==_n||t==Cn}var An=be["__core-js_shared__"];const de=An;var Be=function(){var e=/[^.]+$/.exec(de&&de.keys&&de.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function xn(e){return!!Be&&Be in e}var Sn=Function.prototype,In=Sn.toString;function En(e){if(e!=null){try{return In.call(e)}catch{}try{return e+""}catch{}}return""}var Tn=/[\\^$.*+?()[\]{}|]/g,Ln=/^\[object .+?Constructor\]$/,On=Function.prototype,$n=Object.prototype,Mn=On.toString,Pn=$n.hasOwnProperty,Nn=RegExp("^"+Mn.call(Pn).replace(Tn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rn(e){if(!nt(e)||xn(e))return!1;var t=bn(e)?Nn:Ln;return t.test(En(e))}function Dn(e,t){return e==null?void 0:e[t]}function ot(e,t){var n=Dn(e,t);return Rn(n)?n:void 0}function Fn(e,t){return e===t||e!==e&&t!==t}var jn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kn=/^\w*$/;function Bn(e,t){if(xe(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Ae(e)?!0:kn.test(e)||!jn.test(e)||t!=null&&e in Object(t)}var zn=ot(Object,"create");const Y=zn;function Un(){this.__data__=Y?Y(null):{},this.size=0}function Hn(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Gn="__lodash_hash_undefined__",Vn=Object.prototype,Qn=Vn.hasOwnProperty;function Wn(e){var t=this.__data__;if(Y){var n=t[e];return n===Gn?void 0:n}return Qn.call(t,e)?t[e]:void 0}var Kn=Object.prototype,qn=Kn.hasOwnProperty;function Jn(e){var t=this.__data__;return Y?t[e]!==void 0:qn.call(t,e)}var Zn="__lodash_hash_undefined__";function Yn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Y&&t===void 0?Zn:t,this}function j(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}j.prototype.clear=Un;j.prototype.delete=Hn;j.prototype.get=Wn;j.prototype.has=Jn;j.prototype.set=Yn;function Xn(){this.__data__=[],this.size=0}function ce(e,t){for(var n=e.length;n--;)if(Fn(e[n][0],t))return n;return-1}var eo=Array.prototype,to=eo.splice;function no(e){var t=this.__data__,n=ce(t,e);if(n<0)return!1;var o=t.length-1;return n==o?t.pop():to.call(t,n,1),--this.size,!0}function oo(e){var t=this.__data__,n=ce(t,e);return n<0?void 0:t[n][1]}function ao(e){return ce(this.__data__,e)>-1}function so(e,t){var n=this.__data__,o=ce(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}function V(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}V.prototype.clear=Xn;V.prototype.delete=no;V.prototype.get=oo;V.prototype.has=ao;V.prototype.set=so;var ro=ot(be,"Map");const io=ro;function lo(){this.size=0,this.__data__={hash:new j,map:new(io||V),string:new j}}function co(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ue(e,t){var n=e.__data__;return co(t)?n[typeof t=="string"?"string":"hash"]:n.map}function uo(e){var t=ue(this,e).delete(e);return this.size-=t?1:0,t}function po(e){return ue(this,e).get(e)}function fo(e){return ue(this,e).has(e)}function ho(e,t){var n=ue(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}function k(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}k.prototype.clear=lo;k.prototype.delete=uo;k.prototype.get=po;k.prototype.has=fo;k.prototype.set=ho;var mo="Expected a function";function Se(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(mo);var n=function(){var o=arguments,s=t?t.apply(this,o):o[0],a=n.cache;if(a.has(s))return a.get(s);var f=e.apply(this,o);return n.cache=a.set(s,f)||a,f};return n.cache=new(Se.Cache||k),n}Se.Cache=k;var vo=500;function go(e){var t=Se(e,function(o){return n.size===vo&&n.clear(),o}),n=t.cache;return t}var _o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yo=/\\(\\)?/g,wo=go(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(_o,function(n,o,s,a){t.push(s?a.replace(yo,"$1"):o||n)}),t});const Co=wo;function bo(e){return e==null?"":tt(e)}function Ao(e,t){return xe(e)?e:Bn(e,t)?[e]:Co(bo(e))}var xo=1/0;function So(e){if(typeof e=="string"||Ae(e))return e;var t=e+"";return t=="0"&&1/e==-xo?"-0":t}function Io(e,t){t=Ao(t,e);for(var n=0,o=t.length;e!=null&&n<o;)e=e[So(t[n++])];return n&&n==o?e:void 0}function Eo(e,t,n){var o=e==null?void 0:Io(e,t);return o===void 0?n:o}function To(e){for(var t=-1,n=e==null?0:e.length,o={};++t<n;){var s=e[t];o[s[0]]=s[1]}return o}const Lo=e=>e===void 0,at=e=>typeof e=="number",ze=e=>typeof Element>"u"?!1:e instanceof Element,Oo=e=>ge(e)?!Number.isNaN(Number(e)):!1,Ue=e=>Object.keys(e);function $o(e,t="px"){if(!e)return"";if(at(e)||Oo(e))return`${e}${t}`;if(ge(e))return e}/*! Element Plus Icons Vue v2.1.0 */var ee=(e,t)=>{let n=e.__vccOpts||e;for(let[o,s]of t)n[o]=s;return n},Mo={name:"CircleCloseFilled"},Po={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},No=l("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336L512 457.664z"},null,-1),Ro=[No];function Do(e,t,n,o,s,a){return C(),x("svg",Po,Ro)}var Fo=ee(Mo,[["render",Do],["__file","circle-close-filled.vue"]]),jo={name:"Close"},ko={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Bo=l("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),zo=[Bo];function Uo(e,t,n,o,s,a){return C(),x("svg",ko,zo)}var Ho=ee(jo,[["render",Uo],["__file","close.vue"]]),Go={name:"InfoFilled"},Vo={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Qo=l("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),Wo=[Qo];function Ko(e,t,n,o,s,a){return C(),x("svg",Vo,Wo)}var qo=ee(Go,[["render",Ko],["__file","info-filled.vue"]]),Jo={name:"SuccessFilled"},Zo={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Yo=l("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),Xo=[Yo];function ea(e,t,n,o,s,a){return C(),x("svg",Zo,Xo)}var ta=ee(Jo,[["render",ea],["__file","success-filled.vue"]]),na={name:"WarningFilled"},oa={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},aa=l("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256zm0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4z"},null,-1),sa=[aa];function ra(e,t,n,o,s,a){return C(),x("svg",oa,sa)}var ia=ee(na,[["render",ra],["__file","warning-filled.vue"]]);const st="__epPropKey",J=e=>e,la=e=>We(e)&&!!e[st],rt=(e,t)=>{if(!We(e)||la(e))return e;const{values:n,required:o,default:s,type:a,validator:f}=e,m={type:a,required:!!o,validator:n||f?_=>{let g=!1,v=[];if(n&&(v=Array.from(n),Ie(e,"default")&&v.push(s),g||(g=v.includes(_))),f&&(g||(g=f(_))),!g&&v.length>0){const b=[...new Set(v)].map(S=>JSON.stringify(S)).join(", ");At(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${b}], got value ${JSON.stringify(_)}.`)}return g}:void 0,[st]:!0};return Ie(e,"default")&&(m.default=s),m},it=e=>To(Object.entries(e).map(([t,n])=>[t,rt(n,t)])),ca=J([String,Object,Function]),ua={Close:Ho},He={success:ta,warning:ia,error:Fo,info:qo},da=(e,t)=>{if(e.install=n=>{for(const o of[e,...Object.values(t??{})])n.component(o.name,o)},t)for(const[n,o]of Object.entries(t))e[n]=o;return e},pa=(e,t)=>(e.install=n=>{e._context=n._context,n.config.globalProperties[t]=e},e),pe={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},fa=["","default","small","large"];var ha={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const ma=e=>(t,n)=>va(t,n,y(e)),va=(e,t,n)=>Eo(n,e,e).replace(/\{(\w+)\}/g,(o,s)=>{var a;return`${(a=t==null?void 0:t[s])!=null?a:`{${s}}`}`}),ga=e=>{const t=A(()=>y(e).name),n=D(e)?e:T(e);return{lang:t,locale:n,t:ma(e)}},lt=Symbol("localeContextKey"),_a=e=>{const t=e||re(lt,T());return ga(A(()=>t.value||ha))},me="el",ya="is-",R=(e,t,n,o,s)=>{let a=`${e}-${t}`;return n&&(a+=`-${n}`),o&&(a+=`__${o}`),s&&(a+=`--${s}`),a},ct=Symbol("namespaceContextKey"),wa=e=>{const t=e||re(ct,T(me));return A(()=>y(t)||me)},ut=(e,t)=>{const n=wa(t);return{namespace:n,b:(r="")=>R(n.value,e,r,"",""),e:r=>r?R(n.value,e,"",r,""):"",m:r=>r?R(n.value,e,"","",r):"",be:(r,i)=>r&&i?R(n.value,e,r,i,""):"",em:(r,i)=>r&&i?R(n.value,e,"",r,i):"",bm:(r,i)=>r&&i?R(n.value,e,r,"",i):"",bem:(r,i,u)=>r&&i&&u?R(n.value,e,r,i,u):"",is:(r,...i)=>{const u=i.length>=1?i[0]:!0;return r&&u?`${ya}${r}`:""},cssVar:r=>{const i={};for(const u in r)r[u]&&(i[`--${n.value}-${u}`]=r[u]);return i},cssVarName:r=>`--${n.value}-${r}`,cssVarBlock:r=>{const i={};for(const u in r)r[u]&&(i[`--${n.value}-${e}-${u}`]=r[u]);return i},cssVarBlockName:r=>`--${n.value}-${e}-${r}`}},Ge=T(0),dt=2e3,pt=Symbol("zIndexContextKey"),Ca=e=>{const t=e||re(pt,void 0),n=A(()=>{const a=y(t);return at(a)?a:dt}),o=A(()=>n.value+Ge.value);return{initialZIndex:n,currentZIndex:o,nextZIndex:()=>(Ge.value++,o.value)}};rt({type:String,values:fa,required:!1});const ba=Symbol("size"),ft=Symbol(),ae=T();function ht(e,t=void 0){const n=Ke()?re(ft,ae):ae;return e?A(()=>{var o,s;return(s=(o=n.value)==null?void 0:o[e])!=null?s:t}):n}function Aa(e,t){const n=ht(),o=ut(e,A(()=>{var c;return((c=n.value)==null?void 0:c.namespace)||me})),s=_a(A(()=>{var c;return(c=n.value)==null?void 0:c.locale})),a=Ca(A(()=>{var c;return((c=n.value)==null?void 0:c.zIndex)||dt})),f=A(()=>{var c;return y(t)||((c=n.value)==null?void 0:c.size)||""});return xa(A(()=>y(n)||{})),{ns:o,locale:s,zIndex:a,size:f}}const xa=(e,t,n=!1)=>{var o;const s=!!Ke(),a=s?ht():void 0,f=(o=t==null?void 0:t.provide)!=null?o:s?xt:void 0;if(!f)return;const c=A(()=>{const m=y(e);return a!=null&&a.value?Sa(a.value,m):m});return f(ft,c),f(lt,A(()=>c.value.locale)),f(ct,A(()=>c.value.namespace)),f(pt,A(()=>c.value.zIndex)),f(ba,{size:A(()=>c.value.size||"")}),(n||!ae.value)&&(ae.value=c.value),c},Sa=(e,t)=>{var n;const o=[...new Set([...Ue(e),...Ue(t)])],s={};for(const a of o)s[a]=(n=t[a])!=null?n:e[a];return s};var mt=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n};const Ia=it({size:{type:J([Number,String])},color:{type:String}}),Ea=ie({name:"ElIcon",inheritAttrs:!1}),Ta=ie({...Ea,props:Ia,setup(e){const t=e,n=ut("icon"),o=A(()=>{const{size:s,color:a}=t;return!s&&!a?{}:{fontSize:Lo(s)?void 0:$o(s),"--color":a}});return(s,a)=>(C(),x("i",St({class:y(n).b(),style:y(o)},s.$attrs),[qe(s.$slots,"default")],16))}});var La=mt(Ta,[["__file","/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue"]]);const Ve=da(La),vt=["success","info","warning","error"],Oa=it({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:ca},id:{type:String,default:""},message:{type:J([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:J(Function),default:()=>{}},onClose:{type:J(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...vt,""],default:""},zIndex:{type:Number,default:0}}),$a={destroy:()=>!0},Ma=["id"],Pa=["textContent"],Na={key:0},Ra=["innerHTML"],Da=ie({name:"ElNotification"}),Fa=ie({...Da,props:Oa,emits:$a,setup(e,{expose:t}){const n=e,{ns:o,zIndex:s}=Aa("notification"),{nextZIndex:a,currentZIndex:f}=s,{Close:c}=ua,m=T(!1);let _;const g=A(()=>{const d=n.type;return d&&He[n.type]?o.m(d):""}),v=A(()=>n.type&&He[n.type]||n.icon),b=A(()=>n.position.endsWith("right")?"right":"left"),S=A(()=>n.position.startsWith("top")?"top":"bottom"),I=A(()=>({[S.value]:`${n.offset}px`,zIndex:f.value}));function r(){n.duration>0&&({stop:_}=Gt(()=>{m.value&&u()},n.duration))}function i(){_==null||_()}function u(){m.value=!1}function w({code:d}){d===pe.delete||d===pe.backspace?i():d===pe.esc?m.value&&u():r()}return Je(()=>{r(),a(),m.value=!0}),Wt(document,"keydown",w),t({visible:m,close:u}),(d,p)=>(C(),ne(Tt,{name:y(o).b("fade"),onBeforeLeave:d.onClose,onAfterLeave:p[1]||(p[1]=h=>d.$emit("destroy")),persisted:""},{default:O(()=>[$(l("div",{id:d.id,class:M([y(o).b(),d.customClass,y(b)]),style:fe(y(I)),role:"alert",onMouseenter:i,onMouseleave:r,onClick:p[0]||(p[0]=(...h)=>d.onClick&&d.onClick(...h))},[y(v)?(C(),ne(y(Ve),{key:0,class:M([y(o).e("icon"),y(g)])},{default:O(()=>[(C(),ne(It(y(v))))]),_:1},8,["class"])):q("v-if",!0),l("div",{class:M(y(o).e("group"))},[l("h2",{class:M(y(o).e("title")),textContent:F(d.title)},null,10,Pa),$(l("div",{class:M(y(o).e("content")),style:fe(d.title?void 0:{margin:0})},[qe(d.$slots,"default",{},()=>[d.dangerouslyUseHTMLString?(C(),x(Z,{key:1},[q(" Caution here, message could've been compromised, never use user's input as message "),l("p",{innerHTML:d.message},null,8,Ra)],2112)):(C(),x("p",Na,F(d.message),1))])],6),[[Ee,d.message]]),d.showClose?(C(),ne(y(Ve),{key:0,class:M(y(o).e("closeBtn")),onClick:Et(u,["stop"])},{default:O(()=>[L(y(c))]),_:1},8,["class","onClick"])):q("v-if",!0)],2)],46,Ma),[[Ee,m.value]])]),_:3},8,["name","onBeforeLeave"]))}});var ja=mt(Fa,[["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const se={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},ve=16;let ka=1;const G=function(e={},t=null){if(!le)return{close:()=>{}};(typeof e=="string"||he(e))&&(e={message:e});const n=e.position||"top-right";let o=e.offset||0;se[n].forEach(({vm:g})=>{var v;o+=(((v=g.el)==null?void 0:v.offsetHeight)||0)+ve}),o+=ve;const s=`notification_${ka++}`,a=e.onClose,f={...e,offset:o,id:s,onClose:()=>{Ba(s,n,a)}};let c=document.body;ze(e.appendTo)?c=e.appendTo:ge(e.appendTo)&&(c=document.querySelector(e.appendTo)),ze(c)||(c=document.body);const m=document.createElement("div"),_=L(ja,f,he(f.message)?{default:()=>f.message}:null);return _.appContext=t??G._context,_.props.onDestroy=()=>{Te(null,m)},Te(_,m),se[n].push({vm:_}),c.appendChild(m.firstElementChild),{close:()=>{_.component.exposed.visible.value=!1}}};vt.forEach(e=>{G[e]=(t={})=>((typeof t=="string"||he(t))&&(t={message:t}),G({...t,type:e}))});function Ba(e,t,n){const o=se[t],s=o.findIndex(({vm:_})=>{var g;return((g=_.component)==null?void 0:g.props.id)===e});if(s===-1)return;const{vm:a}=o[s];if(!a)return;n==null||n(a);const f=a.el.offsetHeight,c=t.split("-")[0];o.splice(s,1);const m=o.length;if(!(m<1))for(let _=s;_<m;_++){const{el:g,component:v}=o[_].vm,b=Number.parseInt(g.style[c],10)-f-ve;v.props.offset=b}}function za(){for(const e of Object.values(se))e.forEach(({vm:t})=>{t.component.exposed.visible.value=!1})}G.closeAll=za;G._context=null;const K=pa(G,"$notify");let P=Qe.create({baseURL:"/api",timeout:5e3});P.interceptors.request.use(e=>e);P.interceptors.response.use(e=>e.data,e=>{var o;let t="",n=(o=e.response)==null?void 0:o.status;if(n)switch(n){case 401:t="TOKEN 过期: "+e.response.break;case 403:t="无权访问";break;case 404:t="Not Found";break;case 500:t="服务器出现错误";break;default:t="网络出现问题";break}return K({message:t,type:"error",duration:1e3}),Promise.reject(e)});const N=e=>(_e("data-v-16a31967"),e=e(),ye(),e),Ua={key:0,id:"panel2",class:"jy-content"},Ha={class:"title"},Ga=N(()=>l("p",{class:"currentSelect"},"你当前选择的是：",-1)),Va={class:"currentSelectRiver"},Qa={key:0},Wa=N(()=>l("p",{style:{color:"white"}},"请先命名上一级河流",-1)),Ka={key:1},qa={class:"infoContainer"},Ja={class:"currentRiverName"},Za=N(()=>l("p",{class:"title"},[oe(" 当前河段名"),l("span",{style:{color:"red","font-size":"18px"}},"*"),oe("： ")],-1)),Ya={class:"rely"},Xa=N(()=>l("p",{class:"title"},[oe(" 命名依据"),l("span",{style:{color:"red","font-size":"18px"}},"*"),oe("： ")],-1)),es=$t('<option value="0" data-v-16a31967>所在国标准地图</option><option value="1" data-v-16a31967>镇志</option><option value="2" data-v-16a31967>县志</option><option value="3" data-v-16a31967>市志</option><option value="4" data-v-16a31967>当地相传</option><option value="5" data-v-16a31967>本人考察论证</option>',6),ts=[es],ns={class:"riverCode"},os=N(()=>l("p",{class:"title"},"中国河流代码：",-1)),as={class:"average"},ss=N(()=>l("p",{class:"title"},"平均流量：",-1)),rs={class:"pointInfo"},is=N(()=>l("p",{class:"title"},"水文站信息：",-1)),ls=N(()=>l("button",null,"匹配信息",-1)),cs={class:"bottom"},us={__name:"panel",props:["showPanel","hasLast","formData"],emits:["close","namedLast"],setup(e,{emit:t}){const n=e,{zh_name:o,select_river:s,averageFlow:a,naming_reason:f,station_name:c,riverCode:m,en_name:_}=Lt(n.formData),g=[{value:"0",text:"所在国标准地图"},{value:"1",text:"镇志"},{value:"2",text:"县志"},{value:"3",text:"市志"},{value:"4",text:"当地相传"},{value:"5",text:"本人考察论证"}];let v=!1;const b=()=>{console.log(111),console.log(v),v||(o.value==""||o.value=="未命名"?K({message:"请输入河流中文名",type:"warning",duration:1e3}):f.value==""?(K({title:"Error",message:"请选择命名依据",type:"error",duration:1e3}),console.log("请选择命名依据")):(v=!0,i()))},S=()=>{let d=new Date,p=d.getFullYear(),h=d.getMonth()>=9?d.getMonth()*1+1:"0"+(d.getMonth()*1+1),E=d.getDate()>9?d.getDate():"0"+d.getDate();return p+"-"+h+"-"+E},I=()=>g.find(d=>d.value==f.value).text,r=()=>{var p,h,E;const d={rivername:o.value.replace("@","-"),discharge:a.value==""?0:a.value,channelid:(p=window.$selectedRiver)==null?void 0:p.channelid,level:(h=window==null?void 0:window.$selectedRiver)==null?void 0:h.level,hierarcode:window.$selectedRiver.hierarcode.toString(),basincode:(E=window.$selectedRiver)==null?void 0:E.basincode,shuilicode:m.value==""?"":m.value,tablelocation:window.$selectedRiver.tablelocation};P({url:"/submittmp",method:"POST",data:d}).then(B=>{console.log(B,"改名成功"),u(),v=!1}).catch(B=>{console.log(B),v=!1})},i=()=>{var p,h,E;console.log(window.$selectedRiver);const d={rivername:o.value.replace("@","-"),level:(p=window==null?void 0:window.$selectedRiver)==null?void 0:p.level,channelid:(h=window.$selectedRiver)==null?void 0:h.channelid,hierarcode:window.$selectedRiver.hierarcode.toString(),basincode:(E=window.$selectedRiver)==null?void 0:E.basincode,recorddate:S(),source:I(),shuilicode:m.value==""?"":m.value,discharge:a.value==""?0:a.value,full_name:o.value.replace("-","@"),englishname:_.value,regioncode:window.$selectedRiver.regioncode,tablelocation:window.$selectedRiver.tablelocation,riverlocation:"dongjiang_log",staionname:c.value==""?"":c.value};console.log("request"),P({url:"/submit",method:"POST",data:d}).then(B=>{t("close",!1),window.viewer.entities.removeAll(),K({message:"命名成功！",type:"success",duration:1e3}),r()}).catch(B=>{console.log(B),v=!1,K({message:"提交失败",type:"error",duration:1e3})})},u=()=>{o.value="未命名",_.value="",m.value="",a.value="",c.value=""},w=()=>{u(),t("close",!1)};return(d,p)=>n.showPanel?(C(),x("div",Ua,[l("div",Ha,[Ga,l("p",Va,F(y(s)),1)]),n.hasLast?(C(),x("div",Qa,[Wa,l("button",{class:"confirm",onClick:p[0]||(p[0]=h=>d.$emit("namedLast"))},"命名上一级"),l("button",{class:"close",onClick:p[1]||(p[1]=h=>w())},"关闭")])):(C(),x("div",Ka,[l("div",qa,[l("div",Ja,[Za,$(l("input",{type:"text",class:"firstInput","onUpdate:modelValue":p[2]||(p[2]=h=>D(o)?o.value=h:null)},null,512),[[Q,y(o)]]),$(l("input",{type:"text",class:"secondInput","onUpdate:modelValue":p[3]||(p[3]=h=>D(_)?_.value=h:null)},null,512),[[Q,y(_)]])]),l("div",Ya,[Xa,$(l("select",{id:"selectValue","onUpdate:modelValue":p[4]||(p[4]=h=>D(f)?f.value=h:null),class:"selectList"},ts,512),[[Ot,y(f)]])]),l("div",ns,[os,$(l("input",{type:"text","onUpdate:modelValue":p[5]||(p[5]=h=>D(m)?m.value=h:null)},null,512),[[Q,y(m)]])]),l("div",as,[ss,$(l("input",{type:"text","onUpdate:modelValue":p[6]||(p[6]=h=>D(a)?a.value=h:null)},null,512),[[Q,y(a)]])]),l("div",rs,[is,$(l("input",{type:"text",placeholder:"选填","onUpdate:modelValue":p[7]||(p[7]=h=>D(c)?c.value=h:null)},null,512),[[Q,y(c)]]),ls])]),l("div",cs,[l("button",{class:"close",onClick:p[8]||(p[8]=h=>w())},"关闭"),l("button",{class:"confirm",onClick:p[9]||(p[9]=h=>b())},"确认命名")])]))])):q("",!0)}},ds=X(us,[["__scopeId","data-v-16a31967"]]),ps="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE4AAABOCAYAAACOqiAdAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATESURBVHgB7ZxNUhs5FMcfjasMO+YE05wgsJsdpor9ZE4wnhMEbyi+qhyq+FzZnCCeEww5AJWeE4znBFFOELKDBZD/K4uE2FLb3VKrn4N+VSobqS13/1HrPT29NlEkEolEIpFIrSyQQM7OztKHh4eVJElu9vb2FAlElHAXFxfbEOwN3qbPqhXKFcqlJBFFCNftdleWlpb+wdtWzmEKZVOKeAkJAKK9o3zRmBTlA4tMAqhdOMxnbby8nvHwtNlsviEBSBhxf1IxtkkAEoRbK3LwwsLCyvHx8a9UMxKEKzxnwU1JqWYkCHdDBXl8fPxCNSNBuCEVQx0cHBT9jHckCHdU5GCMtgEJYJFq5vr6Wm1tbfE899sMh6v9/f0/SAAiHGCsBjp46U85LEPZJCGIWqvCGf5IP65Tv3F/f58eHh5+IiGIGHHzSBSuJFG4kkThSlKJcdDxNV6Mb9BoLVpHKCiDzzfE2raSAKhX4bRgb/FWROjnGf3b29sjUHh5Z8ObcLxPgJcPZHEnBKDIYwTZi3BzINoTijyJ58s4dEm+aEyK8o484CycDn23aX5o4Zxb5EiD3MkLfStYtT62/IKGgfCdq5R/F3BbRi7fQQ70er0VWKvPlmaFtnWflqwI+tx43jWG5tH2i8u5Od2q+PK8/YLNukRjOp0Of3fH1r68vLxBDrjOcampEo6niNQFnENGI0s6AadYkAOVLLkwx9Q20kJhNA5PSyaMnFe66gqR17/pBaAtLhu8lMP0d3d3701TzsSI06L9x28xcl7rMjg9PRWxEVwlEO0tjRz5NkqLr7vZbBrTLiaEg2icjpAa+u1KyduoAr366Y7XQ7w1U9qFaY4z+mW8g44OXtHPS5rTNuE9xHjcd1JbAw+a8booXEmicCXxsVYtzMnJyRqGP5v70ukMT32wz6gd3aAEFU5brm/Zl7horhtg6daZdXlmSntFH4oCp7mGvlXZR2qN1bW1EDOBY3uGPlLddzCCCQcH2uYfMq1ZkgX59iR77C/1EWeblZAjLtcHbDQaUzMzeU7La8ec6RTxKEIw4XDRuXkfiFZMnePYmOS1J0kSLGAaTDjMTfyQh7I0c/rWvzQFbYEzWx8Q9n8KRDDhOLC4uLjIuW1qrIn/LpK+9ZepD+47pFUN6o7s7OwM4U6sc/QVtybPadksI+05WpzV8/Pz33Ufyhb6qZLgDrC+wPe6lGZ3d9e5DxfikqskUbiSTAjHGy30Ail63aYRZ/WFpvli8wwMVmZr43Sx8brE0MElGfwtfLgv9WllH+h9WFPmO2cjXI5XJpYO2K8a0Gj0cXLeNtwG6+buz4J+bID9RL5udqhZSGPUpWHpQOkOXhy49gGNBk0u0aqWxEm4HEuU6qBlrehzSC3NihxwEm6KJepR/VjPwdVDcE5lxX/VFNV9IkM5Qmh8GGotqUPrvIbt5pzXEHPZOjngY63KOSUtSxvXt3AhLDBJQVtLJ3wlT+eNOmkojLZVcsSXVWXXZR6Waoo8PbrpRTj2+xBI5BNSJJcbn8FOb34cBynxson544rkkaGs63P0QiXPcmErcAPmvk2jX7CpKzWMpw5+nqtfNMo8C5U/Ic37pSF/J4R/WgPls6SnqSORSCQSiUQq4Ct16rGRqDm3KQAAAABJRU5ErkJggg==",fs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALSSURBVHgB7ZvNceIwFMcfYQ/clhLYDkgFy1aQ7WBNB3Bh+DhgX4CbsxWst4OkAkgFSQfQQTjCBfIUW0TDwcj46Ulm9JvR2JMIGP0s//VhAPB4PB6Px1OQ2qUK8/m8dTwe41qt1sbjGx77o9FoAzeGjoglHjpnf06wRLckJFdEHMfN3W73nlMlwpLcgpC7vH+ihCbkM8WynM1mf6Di3EF5WpgbCd5C6yoLoRAhkUJeRcBCxaAUIWljWaOMf1USYkKEJIAKCTEpQhJAGqg9cBgOEQKRH7HLgcolQnIaYbB0wCG4RUhaWJYu5YctEZIAHAlU2yIkAaQ9JARL6Kw11nh6aapNyQZXueF4PP4PjFxcfYphTyQ+8LPBz+0Nh8NnYOCiCMFisXjAq/QbT0Xh7B2CBBiW/FoiVCxKScCgkMIiVCxJiTC3HqMo2gIhpUSoMEshD1QyESqMUsiEGBGhwiRlhaVbJj+Mi1DBofgnDokBpJvBLaAngSsDlVWEimEphQPVmggVQ1JW2DN+6VZ2QoRKJuUJCPLkcDjcTyaTN526riy6TqAEcXFI5gj4Vt+164IDiE0aHFkestuDZGQRjydxWL3Xrf8NLHHe+LQjkLDF933c7/d/i7yIrUdMp9Nmo9FoU1/5MxJwcfiUjcdTsWFrdEKVzTBf4ErIRTA2/jMH8NArI0BCIoKz8RlbvL1C3LQplAN5XC3CQuMFpyC0ugy31PhPMgERtQCJlojsYQx74zNW9Xq9PxgMtGaI16Lz1aEQ0i+EcFN6JCiCzoSKW4KV7fxcEcxPn4wFoQ7WptgqpoNQB9siVli6eBtswDK2RLAGoQ7cIkQQ9lHAEzgGlwirQaiDaRHOC5CYFCG6f9+FINTBhAjnglAHShEiCIOqCZBQiCDfG7BB7nY+LrnzAk4EYYhPlH5UXYLA/3AlQ+fW6EK6Au3A18qwkjng8Xg8Ho+HlA8OEY0xlM+v8wAAAABJRU5ErkJggg==";const te=e=>(_e("data-v-9198d8fb"),e=e(),ye(),e),hs=te(()=>l("img",{src:ps,style:{width:"2rem",height:"2rem"}},null,-1)),ms=te(()=>l("img",{src:fs,style:{width:"2rem",height:"2rem"}},null,-1)),vs=te(()=>l("span",{class:"self-start text_3"},"对话记录",-1)),gs={class:"flex-col group_4 space-y-12"},_s={class:"flex-row justify-end group_5 space-x-5"},ys={class:"flex-col justify-start items-start text-wrapper_2"},ws={class:"text_4"},Cs=te(()=>l("img",{class:"self-start image_3",src:"https://codefun-proj-user-res-1256085488.cos.ap-guangzhou.myqcloud.com/618880640163bf0011e2e0b2/64914e4f54fe0000116a6d3f/16885501565342185854.png"},null,-1)),bs={class:"flex-row items-center space-x-6"},As=te(()=>l("img",{class:"image_4",src:"https://codefun-proj-user-res-1256085488.cos.ap-guangzhou.myqcloud.com/618880640163bf0011e2e0b2/64914e4f54fe0000116a6d3f/16885501568338949860.png"},null,-1)),xs={class:"flex-col justify-start text-wrapper_3"},Ss={class:"font_1 text_5"},Is={__name:"popupSearch",setup(e){const t={name:""},n=we([{q:"告诉我东江流域中的东源江的长度是多少",ans:"长度的值是24"}]),o=[125,Math.round(.4*window.innerHeight),Math.round(.7*window.innerHeight)],s=T(o[0]),a=T(),f=()=>{Mt(()=>{a.value.scrollTop=a.value.scrollHeight})},c=()=>{s.value=o[1]},m=()=>{f(),console.log(t.name),n.push({q:t.name}),t.name.length>0&&Qe.post("https://eslab.dgut.edu.cn/searchDongjiangList",gt.stringify(t)).then(g=>{if(console.log("res",g),console.log("res.data.data.length",g.data.data.length),g.data.data.length==1){const v=JSON.parse(g.data.data[0].geom),b=Math.ceil(window.viewer.camera.positionCartographic.height),S=parseFloat(v[0]),I=parseFloat(v[1]);_(S,I,b)}}),t.name=""},_=(g,v,b)=>{if(b>15e3){const S=g+.1,I=v+.1,r=Math.sqrt(Math.pow(S-g,2)+Math.pow(I-v,2));viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(g,v,r*177770*1.5),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:Cesium.Math.toRadians(0)}})}else viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(g,v,b),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:Cesium.Math.toRadians(0)}})};return(g,v)=>{const b=U("van-search"),S=U("van-floating-panel");return C(),x("div",null,[L(S,{height:s.value,"onUpdate:height":v[1]||(v[1]=I=>s.value=I),anchors:o,"content-draggable":!1,class:"jy-panel"},{default:O(()=>[L(b,{modelValue:t.name,"onUpdate:modelValue":v[0]||(v[0]=I=>t.name=I),onFocus:c,placeholder:"请输入搜索关键词",onSearch:m,class:"jy-search"},{"left-icon":O(()=>[hs]),"right-icon":O(()=>[ms]),_:1},8,["modelValue"]),l("div",{class:"flex-col relative section_4 space-y-16",ref_key:"chatContainer",ref:a},[vs,(C(!0),x(Z,null,Ze(n,I=>(C(),x("div",gs,[l("div",_s,[l("div",ys,[l("span",ws,F(I.q),1)]),Cs]),l("div",bs,[As,l("div",xs,[l("span",Ss,F(I.ans),1)])])]))),256))],512)]),_:1},8,["height"])])}}},Es=X(Is,[["__scopeId","data-v-9198d8fb"]]);const Ts={class:"intr_detaill"},Ls=["src"],Os={__name:"detailPanel",setup(e){const t=T(!1),n=we({name:"",introduction:"",pic:""});return Pt.config.globalProperties.$eventBus.on("detail",o=>{t.value=o.popupShow,n.name=o.info[0].name,n.introduction=o.intr==""?"暂无数据":o.intr,n.pic=o.pic==""?"":o.pic}),(o,s)=>{const a=U("van-cell"),f=U("van-cell-group"),c=U("van-popup");return C(),x("div",null,[L(c,{show:t.value,"onUpdate:show":s[0]||(s[0]=m=>t.value=m),closeable:"",round:"",overlay:!1,position:"bottom",style:{height:"30%"}},{default:O(()=>[L(f,null,{default:O(()=>[L(a,{title:n.name,class:"cell_title"},null,8,["title"]),l("div",Ts,[l("div",null,F(n.introduction),1),n.pic!=""?(C(),x("img",{key:0,src:n.pic,referrerpolicy:"no-referrer"},null,8,Ls)):q("",!0)])]),_:1})]),_:1},8,["show"])])}}},$s=X(Os,[["__scopeId","data-v-e7fcde9f"]]),Ms=""+new URL("tdt-d25853ca.png",import.meta.url).href,Ps=""+new URL("tdtyx-7cb874b6.png",import.meta.url).href;const Ns=e=>(_e("data-v-93e5f92b"),e=e(),ye(),e),Rs={class:"jy-layers"},Ds={class:"jy-container"},Fs=Ns(()=>l("div",{class:"jy-header"},[l("strong",null,"图层")],-1)),js={class:"jy-content"},ks=["onClick"],Bs={__name:"changeLayer",setup(e){const t=T(!1),n=T([{src:Ms,isSelected:!1,name:"天地图"},{src:Ps,isSelected:!1,name:"天地图影像"}]),o=s=>{n.value.forEach((a,f)=>{a.isSelected=f===s})};return(s,a)=>{const f=U("van-popup");return C(),x(Z,null,[l("div",Rs,[l("div",{class:"jy-change",onClick:a[0]||(a[0]=c=>t.value=!t.value)})]),L(f,{show:t.value,"onUpdate:show":a[1]||(a[1]=c=>t.value=c),closeable:"",round:!0,position:"bottom",style:{height:"30%"}},{default:O(()=>[l("div",Ds,[Fs,l("div",js,[(C(!0),x(Z,null,Ze(n.value,(c,m)=>(C(),x("div",{class:M(["jy-content__layer",{highlightLayer:c.isSelected}]),key:m,style:fe({backgroundImage:`url(${c.src})`}),onClick:_=>o(m)},[l("p",{class:M(["jy-Btext",{highlight:c.isSelected}])},F(c.name),3)],14,ks))),128))])])]),_:1},8,["show"])],64)}}},zs=X(Bs,[["__scopeId","data-v-93e5f92b"]]);const Us={id:"cesiumContainer"},Vs={__name:"main",setup(e){T(!0);const t=r=>{let i=0,u=0;for(let p=0;p<r.length;p+=2)i+=r[p+1],u+=r[p];const w=i/(r.length/2);return[u/(r.length/2),w]},n=r=>{const i=t(r.scope),u=i[0],w=i[1],d=r.scope[0],p=r.scope[1],h=Math.sqrt(Math.pow(d-u,2)+Math.pow(p-w,2));window.viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(u,w,h*177770*4),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:Cesium.Math.toRadians(0)}})},o=T(!1),s=T(!1),a=we({zh_name:"",select_river:"",averageFlow:"",naming_reason:"",station_name:"",riverCode:"",en_name:""}),f=()=>{o.value=!1};let c;const m=async r=>{const i=window.viewer.scene.globe.ellipsoid,u=window.viewer.scene.camera.pickEllipsoid(r.position,window.viewer.scene.globe.ellipsoid),w=i.cartesianToCartographic(u),d=Cesium.Math.toDegrees(w.longitude),p=Cesium.Math.toDegrees(w.latitude),h=Math.ceil(window.viewer.camera.positionCartographic.height);let E;return h>3e5&&(E=6),h<3e5&&h>2e5&&(E=5),h<=2e5&&h>1e5&&(E=4),h<=15e4&&(E=3),h<=1e5&&(E=2),h<=3e4&&(E=1),console.log(d,p,h,E,"经纬度高度层级"),P({url:"/getriver",method:"post",data:{lon:d,lat:p,index:E},headers:{"Content-Type":"application/x-www-form-urlencoded"}})},_=r=>P({url:"/getriverlog",method:"POST",data:{hierarcode:r.hierarcode,tablename:"dongjiang_log",basincode:r.basincode,regioncode:r.regioncode}}),g=r=>{let i=[],u=r.split("-");i.push(u[0]),u.forEach(d=>{i.indexOf(d)==-1&&i.push(d)});let w="";return i.forEach(d=>{w+=d+"-"}),w=w.slice(0,-1),w},v=async r=>{a.select_river="";let i=[];for(let w=0;w<r.hierarcode.length;w=w+2)i.push(r.hierarcode.slice(w,w+2));const u=await _(r);u.length==0&&i.length==1?(s.value=!1,a.zh_name="未命名",a.select_river=""):u.length!==i.length&&u.length+1==i.length?(s.value=!1,u.map((w,d)=>{const{rivername:p}=w;let h=p.indexOf("-")==-1?p:p.replace("-","@");d==u.length-1?a.select_river+=h:d!=u.length-1&&(a.select_river+=h+"-"),console.log(a.select_river,"select"),a.zh_name="未命名"}),g(a.select_river)):u.length==i.length?(s.value=!1,u.map((w,d)=>{const{rivername:p}=w;let h=p.indexOf("-")==-1?p:p.replace("-","@");d==u.length-2?a.select_river+=h:d!=u.length-2&&d!=u.length-1?a.select_river+=h+"-":d==u.length-1&&(a.zh_name=p)})):(s.value=!0,a.zh_name="未命名",b=()=>{S(r)}),o.value=!0};let b;const S=async r=>{a.select_river="",delete r.scope;const i=await P({url:"/getLastRiverLocation",method:"post",data:{...r}}),u=await P({url:"/getRiverGeom",method:"post",data:i[0]});window.$selectedRiver=u,n(u),o.value=!1,typeof u=="string"?window.viewer.entities.remove(c):(window.viewer.entities.remove(c),c=window.viewer.entities.add({name:"Red line on the surface",polyline:{positions:Cesium.Cartesian3.fromDegreesArray(u.scope),followSurface:!1,width:7,material:new Cesium.PolylineOutlineMaterialProperty({color:Cesium.Color.ORANGE,outlineWidth:7,outlineColor:Cesium.Color.RED}),depthFailMaterial:new Cesium.PolylineOutlineMaterialProperty({color:Cesium.Color.RED,outlineWidth:7,outlineColor:Cesium.Color.RED})}}),v(i[0]))},I=()=>{new Cesium.ScreenSpaceEventHandler(window.viewer.scene.canvas).setInputAction(function(i){Ft(async function(){window.viewer.entities.remove(c);const u=await m(i);console.log(u),u.code==2e4&&(s.value=!1,n(u.data),window.$selectedRiver=u.data,c=window.viewer.entities.add({name:"Red line on the surface",polyline:{positions:Cesium.Cartesian3.fromDegreesArray(u.data.scope),followSurface:!1,width:4,material:new Cesium.PolylineOutlineMaterialProperty({color:Cesium.Color.RED,outlineWidth:2,outlineColor:Cesium.Color.RED}),depthFailMaterial:new Cesium.PolylineOutlineMaterialProperty({color:Cesium.Color.RED,outlineWidth:2,outlineColor:Cesium.Color.RED})}}),v(u.data))},500)()},Cesium.ScreenSpaceEventType.RIGHT_CLICK)};return Je(()=>{Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI5ZGE0MzdlZC00NGFhLTQ3ODItODQyNC01MTVlMmZiMjA4NDciLCJpZCI6NzU4ODIsImlhdCI6MTYzODk1MDcyM30.aB08DKXLq43IEtIjXrkeDMm4GYmtr9GjfDWnHWumWF0";const r={showRenderLoopErrors:!1,requestRenderMode:!0,maximumRenderTimeChange:1/0,animation:!1,baseLayerPicker:!1,fullscreenButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,shouldAnimate:!0,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,vrButton:!1,scene3DOnly:!0,fullscreenElement:document.body,orderIndependentTranslucency:!1,navigationInstructionsInitiallyVisible:!1},i=new Cesium.Viewer("cesiumContainer",r);i.scene.debugShowFramesPerSecond=!0,i.shadows=!0,i.scene.fxaa=!0,i.scene.postProcessStages.fxaa.enabled=!0,i.scene.debugShowFramesPerSecond=!1,i.scene.globe.enableLighting=!1,i.scene.logarithmicDepthBuffer=!0,i.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),i._cesiumWidget._creditContainer.style.display="none",i.camera.setView({destination:Cesium.Cartesian3.fromDegrees(114.72537169973519,23.924765567670345,628624),orientation:{heading:Cesium.Math.toRadians(360),pitch:Cesium.Math.toRadians(-90),roll:Cesium.Math.toRadians(0)}}),window.viewer=i,window.Cesium=Cesium,i.scene.screenSpaceCameraController.minimumZoomDistance=2e3,I(),_t()}),(r,i)=>(C(),x(Z,null,[l("div",Us,[L(Bt),L(zs),L(ds,{"show-panel":o.value,"has-last":s.value,"form-data":a,onClose:f,onNamedLast:y(b)},null,8,["show-panel","has-last","form-data","onNamedLast"])]),L(Es,{id:"popup_search"}),L($s,{id:"detail_panel"})],64))}};export{Vs as default};
