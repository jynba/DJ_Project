import{t as Y,r as u,R as E,S as i,o as d,c as m,a as n,H as s,x as r,F as x,U as C,u as h,y as L,E as j,z as J,D as g,v as B}from"./index-da29c5d7.js";import{$ as O,g as P,a as R,q as G}from"./displayArea-6bbfd95c.js";const K={class:"near_box"},Q={id:"first_row"},W={class:"first_row_col2"},X={class:"noticebar"},Z={class:"wanrn_detaill"},ee={class:"classification"},te={class:"no_data"},le={__name:"near",setup(ae){Y(()=>{b(),F(),D(0),z()});const I=u(1),q=[{text:"东莞",value:1},{text:"河源",value:2},{text:"惠州",value:3},{text:"深圳",value:4},{text:"广州",value:5},{text:"韶关",value:6}],A=e=>{const t=new Date(e),c=t.getFullYear(),o=t.getMonth()+1,w=t.getDate(),p=t.getHours(),v=t.getMinutes();return`${c}年${o}月${w}日${p}时${v}分`};let l=E([]);const F=()=>{O.ajax({url:"http://open.gd121.cn/share/data/getYJ.do?type=json&key=0b9fdc1c7526ae60e6ba59f82453aa3a&logType=warn",method:"get",success:function(e){console.log(e,"数据判断"),l.push(e.东莞[0]),l.push(e.河源[0]),l.push(e.惠州[0]),l.push(e.深圳[0]),l.push(e.广州[0]),l.push(e.韶关[0]),l.forEach(t=>{t.publishtime=A(t.publishtime)}),console.log("warningCityArr",l)}})},M=[{image:"./classIcon/stations.png",text:"水文站"},{image:"./classIcon/aqueduct.png",text:"人工渠"},{image:"./classIcon/river.png",text:"河流"},{image:"./classIcon/lake.png",text:"湖泊"},{image:"./classIcon/disaster.png",text:"灾害"},{image:"./classIcon/humanact.png",text:"人文活动"},{image:"./classIcon/cityview.png",text:"城市景点"},{image:"./classIcon/heritage.png",text:"文化遗产"},{image:"./classIcon/museum.png",text:"博物馆"},{image:"./classIcon/more.png",text:"更多"}],N=[{image:"./testdetail.png",text:"广东省河源市和平县优胜镇，辖区面积117.31平方千米",city:"优胜镇"},{image:"./testdetail.png",text:"广东省河源市和平县上陵镇，辖区面积117.31平方千米",city:"上陵镇"},{image:"./testdetail.png",text:"广东省河源市和平县合水镇，辖区面积147.31平方千米",city:"合水镇"},{image:"./testdetail.png",text:"广东省河源市和平县下车镇，辖区面积107.31平方千米",city:"下车镇"},{image:"./testdetail.png",text:"广东省河源市和平县长安镇，辖区面积116.31平方千米）",city:"长安镇"}];let _=E([]);const k=u(null),D=e=>{k.value=e;const t=N.filter((c,o)=>o===e);_.length=0,t.forEach(c=>{_.push(c)})},f=u(null),y=u(null),V=u(null),U=u(null),b=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{f.value=e.coords.latitude,y.value=e.coords.longitude;const t=f.value,c=y.value;V.value=null,P(c,t).then(o=>{console.log(o),o.street&&(console.log(),console.log("location.street",o.street),U.value=o.street)})},e=>{e.value=e.message,f.value=null,y.value=null}):V.value="浏览器不支持地理位置获取"},z=()=>{const e={type:"lake"};R.post("https://eslab.dgut.edu.cn/getDongjiangTypeList",G.stringify(e)).then(t=>{console.log("分类数据",t)}).catch(t=>{console.error(t)})};return(e,t)=>{const c=i("van-dropdown-item"),o=i("van-dropdown-menu"),w=i("van-search"),p=i("van-image"),v=i("van-col"),S=i("van-row"),H=i("van-swipe-item"),T=i("van-swipe");return d(),m("div",K,[n("div",Q,[n("div",{class:"first_row_col1",onClick:b},[s(o,null,{default:r(()=>[s(c,{modelValue:I.value,"onUpdate:modelValue":t[0]||(t[0]=a=>I.value=a),options:q},null,8,["modelValue"])]),_:1})]),n("div",W,[s(w,{modelValue:e.value,"onUpdate:modelValue":t[1]||(t[1]=a=>e.value=a),placeholder:"搜索附近",onSearch:e.onSearch,onCancel:e.onCancel},null,8,["modelValue","onSearch","onCancel"])])]),n("div",null,[s(S,null,{default:r(()=>[(d(),m(x,null,C(M,(a,$)=>s(v,{id:"each_detail",key:a.text,span:4.8},{default:r(()=>[s(p,{src:a.image,onClick:ne=>D($),fit:"contain",class:J({selected:$==k.value})},null,8,["src","onClick","class"]),n("p",null,g(a.text),1)]),_:2},1024)),64))]),_:1})]),n("div",X,[s(T,{class:"wanring-swipe",autoplay:3e3,"indicator-color":"gray"},{default:r(()=>[(d(!0),m(x,null,C(h(l),a=>(d(),B(H,{key:a.city},{default:r(()=>[s(p,{class:"swiperImage",src:"./wind/wind-yellow.png",fit:"contain"}),n("div",Z,[n("div",null,g(a.publishtime),1),n("div",null,g(a.city),1),n("div",null,g(a.warn),1)])]),_:2},1024))),128))]),_:1})]),n("div",ee,[(d(!0),m(x,null,C(h(_),a=>L((d(),B(S,{key:a.text,class:"each_classify",justify:"center"},{default:r(()=>[s(v,{span:"10"},{default:r(()=>[s(p,{class:"swiperImage",src:a.image,fit:"cover"},null,8,["src"])]),_:2},1024),s(v,{class:"each_classify_detail",span:"14"},{default:r(()=>[n("div",null,g(a.city),1),n("div",null,g(a.text),1)]),_:2},1024)]),_:2},1024)),[[j,h(_).length>=0]])),128)),L(n("div",te,"暂无数据",512),[[j,h(_).length==0]])])])}}};export{le as default};
