import{a as Ge,q as vt,s as gt}from"./displayArea-135a8999.js";import{_ as Ue}from"./_plugin-vue_export-helper-c27b6911.js";import{o as A,c as I,a as m,u as w,g as _t,b as wt,r as P,d as yt,w as Ct,i as he,e as He,h as Ce,f as bt,j as oe,k as b,l as D,p as At,m as Ve,n as ae,q as We,s as Et,t as Qe,v as Z,x as N,y as L,z as k,A as be,B as St,C as Y,D as ue,F as Ke,E as Ae,G as xt,H as M,T as It,I as de,J as Ee,K as Tt,L as H,M as Mt,N as ee,O as Pt,P as Q,Q as Je,R as Lt}from"./index-67604f6f.js";function qe(e,t){return window.viewer.imageryLayers.addImageryProvider(new Cesium.WebMapServiceImageryProvider({url:e,layers:t,alpha:0,parameters:{service:"WMS",format:"image/png",transparent:!0},show:!1}))}let X=[,-1,-1,-1,-1,-1,-1,-1];function x(e,t=!0){X[e].show=t}let Se;function Ot(){const e=window.viewer.imageryLayers.indexOf(Se);e==-1?Se=qe("http://172.27.101.19:8080/geoserver/dongjiang/wms","dongjiang:dongjiang_reservoirs_total"):window.viewer.imageryLayers.get(e).show=!window.viewer.imageryLayers.get(e).show}function Nt(){for(let e=1;e<X.length;e++)X[e]=qe("http://172.27.101.19:8080/geoserver/dongjiang/wms",`dongjiang:dongjiang_river${e}`),X[e].show=!1;x(5,!0),window.viewer.scene.camera.changed.addEventListener(function(){let e=Math.ceil(window.viewer.camera.positionCartographic.height),t=window.viewer.camera.pickEllipsoid(new Cesium.Cartesian2(window.viewer.canvas.clientWidth/2,window.viewer.canvas.clientHeight/2)),n=Cesium.Ellipsoid.WGS84.cartesianToCartographic(t);n.longitude*180/Math.PI,n.latitude*180/Math.PI,e>620256&&pe(function(){window.viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(114.50734815163804,23.76178676036698,751048),duration:.5})},500)(),e>2e5&&e<3e5?(x(4),x(3,!1),x(2,!1),x(1,!1)):e<=2e5&&e>1e5?(x(3),x(2,!1),x(1,!1)):e<=1e5&&e>3e4?(x(2),x(1,!1)):e<=3e4?x(1):(x(1,!1),x(2,!1),x(3,!1),x(4,!1))})}let xe="";function Rt(){const e=window.viewer.imageryLayers.indexOf(xe);e==-1?xe=window.viewer.imageryLayers.addImageryProvider(new Cesium.WebMapTileServiceImageryProvider({url:"http://{s}.tianditu.gov.cn/cia_c/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=cia&tileMatrixSet=c&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default&format=tiles&tk=a5ef217ac65d9c8323d15a22f98c5c66",layer:"tdtCva",style:"default",format:"tiles",tileMatrixSetID:"c",subdomains:["t0","t1","t2","t3","t4","t5","t6","t7"],tilingScheme:new Cesium.GeographicTilingScheme,tileMatrixLabels:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],maximumLevel:18})):window.viewer.imageryLayers.get(e).show=!window.viewer.imageryLayers.get(e).show}let B;function pe(e,t,n=!0){return function(){if(B&&clearTimeout(B),n){var o=!B;B=setTimeout(()=>{B=null},t),o&&e.apply(this,arguments)}else B=setTimeout(function(){e.apply(context,args)},t)}}const Dt={class:"layout-tool-template modelToolBar"},$t={__name:"loadRiver",setup(e){return(t,n)=>(A(),I("div",Dt,[m("button",{onClick:n[0]||(n[0]=o=>w(Rt)())},"地图标注"),m("button",{onClick:n[1]||(n[1]=o=>w(Ot)())},"显示水库")]))}},Ft=Ue($t,[["__scopeId","data-v-3997a247"]]);var Ie;const re=typeof window<"u",jt=e=>typeof e=="string",kt=()=>{};re&&((Ie=window==null?void 0:window.navigator)!=null&&Ie.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function ve(e){return typeof e=="function"?e():w(e)}function Bt(e){return e}function Ze(e){return _t()?(wt(e),!0):!1}function zt(e,t,n={}){const{immediate:o=!0}=n,r=P(!1);let a=null;function h(){a&&(clearTimeout(a),a=null)}function i(){r.value=!1,h()}function u(...g){h(),r.value=!0,a=setTimeout(()=>{r.value=!1,a=null,e(...g)},ve(t))}return o&&(r.value=!0,re&&u()),Ze(i),{isPending:yt(r),start:u,stop:i}}function Gt(e){var t;const n=ve(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Ut=re?window:void 0;function Ht(...e){let t,n,o,r;if(jt(e[0])||Array.isArray(e[0])?([n,o,r]=e,t=Ut):[t,n,o,r]=e,!t)return kt;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],h=()=>{a.forEach(y=>y()),a.length=0},i=(y,_,E,T)=>(y.addEventListener(_,E,T),()=>y.removeEventListener(_,E,T)),u=Ct(()=>[Gt(t),ve(r)],([y,_])=>{h(),y&&a.push(...n.flatMap(E=>o.map(T=>i(y,E,T,_))))},{immediate:!0,flush:"post"}),g=()=>{u(),h()};return Ze(g),g}const Te=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Me="__vueuse_ssr_handlers__";Te[Me]=Te[Me]||{};var Pe;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(Pe||(Pe={}));var Vt=Object.defineProperty,Le=Object.getOwnPropertySymbols,Wt=Object.prototype.hasOwnProperty,Qt=Object.prototype.propertyIsEnumerable,Oe=(e,t,n)=>t in e?Vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kt=(e,t)=>{for(var n in t||(t={}))Wt.call(t,n)&&Oe(e,n,t[n]);if(Le)for(var n of Le(t))Qt.call(t,n)&&Oe(e,n,t[n]);return e};const Jt={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Kt({linear:Bt},Jt);var qt=typeof global=="object"&&global&&global.Object===Object&&global;const Zt=qt;var Yt=typeof self=="object"&&self&&self.Object===Object&&self,Xt=Zt||Yt||Function("return this")();const ge=Xt;var en=ge.Symbol;const z=en;var Ye=Object.prototype,tn=Ye.hasOwnProperty,nn=Ye.toString,V=z?z.toStringTag:void 0;function on(e){var t=tn.call(e,V),n=e[V];try{e[V]=void 0;var o=!0}catch{}var r=nn.call(e);return o&&(t?e[V]=n:delete e[V]),r}var an=Object.prototype,rn=an.toString;function sn(e){return rn.call(e)}var ln="[object Null]",cn="[object Undefined]",Ne=z?z.toStringTag:void 0;function Xe(e){return e==null?e===void 0?cn:ln:Ne&&Ne in Object(e)?on(e):sn(e)}function un(e){return e!=null&&typeof e=="object"}var dn="[object Symbol]";function _e(e){return typeof e=="symbol"||un(e)&&Xe(e)==dn}function pn(e,t){for(var n=-1,o=e==null?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r}var fn=Array.isArray;const we=fn;var mn=1/0,Re=z?z.prototype:void 0,De=Re?Re.toString:void 0;function et(e){if(typeof e=="string")return e;if(we(e))return pn(e,et)+"";if(_e(e))return De?De.call(e):"";var t=e+"";return t=="0"&&1/e==-mn?"-0":t}function tt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var hn="[object AsyncFunction]",vn="[object Function]",gn="[object GeneratorFunction]",_n="[object Proxy]";function wn(e){if(!tt(e))return!1;var t=Xe(e);return t==vn||t==gn||t==hn||t==_n}var yn=ge["__core-js_shared__"];const le=yn;var $e=function(){var e=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Cn(e){return!!$e&&$e in e}var bn=Function.prototype,An=bn.toString;function En(e){if(e!=null){try{return An.call(e)}catch{}try{return e+""}catch{}}return""}var Sn=/[\\^$.*+?()[\]{}|]/g,xn=/^\[object .+?Constructor\]$/,In=Function.prototype,Tn=Object.prototype,Mn=In.toString,Pn=Tn.hasOwnProperty,Ln=RegExp("^"+Mn.call(Pn).replace(Sn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function On(e){if(!tt(e)||Cn(e))return!1;var t=wn(e)?Ln:xn;return t.test(En(e))}function Nn(e,t){return e==null?void 0:e[t]}function nt(e,t){var n=Nn(e,t);return On(n)?n:void 0}function Rn(e,t){return e===t||e!==e&&t!==t}var Dn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$n=/^\w*$/;function Fn(e,t){if(we(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||_e(e)?!0:$n.test(e)||!Dn.test(e)||t!=null&&e in Object(t)}var jn=nt(Object,"create");const J=jn;function kn(){this.__data__=J?J(null):{},this.size=0}function Bn(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var zn="__lodash_hash_undefined__",Gn=Object.prototype,Un=Gn.hasOwnProperty;function Hn(e){var t=this.__data__;if(J){var n=t[e];return n===zn?void 0:n}return Un.call(t,e)?t[e]:void 0}var Vn=Object.prototype,Wn=Vn.hasOwnProperty;function Qn(e){var t=this.__data__;return J?t[e]!==void 0:Wn.call(t,e)}var Kn="__lodash_hash_undefined__";function Jn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=J&&t===void 0?Kn:t,this}function $(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}$.prototype.clear=kn;$.prototype.delete=Bn;$.prototype.get=Hn;$.prototype.has=Qn;$.prototype.set=Jn;function qn(){this.__data__=[],this.size=0}function se(e,t){for(var n=e.length;n--;)if(Rn(e[n][0],t))return n;return-1}var Zn=Array.prototype,Yn=Zn.splice;function Xn(e){var t=this.__data__,n=se(t,e);if(n<0)return!1;var o=t.length-1;return n==o?t.pop():Yn.call(t,n,1),--this.size,!0}function eo(e){var t=this.__data__,n=se(t,e);return n<0?void 0:t[n][1]}function to(e){return se(this.__data__,e)>-1}function no(e,t){var n=this.__data__,o=se(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}function U(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}U.prototype.clear=qn;U.prototype.delete=Xn;U.prototype.get=eo;U.prototype.has=to;U.prototype.set=no;var oo=nt(ge,"Map");const ao=oo;function ro(){this.size=0,this.__data__={hash:new $,map:new(ao||U),string:new $}}function so(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ie(e,t){var n=e.__data__;return so(t)?n[typeof t=="string"?"string":"hash"]:n.map}function io(e){var t=ie(this,e).delete(e);return this.size-=t?1:0,t}function lo(e){return ie(this,e).get(e)}function co(e){return ie(this,e).has(e)}function uo(e,t){var n=ie(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}function F(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}F.prototype.clear=ro;F.prototype.delete=io;F.prototype.get=lo;F.prototype.has=co;F.prototype.set=uo;var po="Expected a function";function ye(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(po);var n=function(){var o=arguments,r=t?t.apply(this,o):o[0],a=n.cache;if(a.has(r))return a.get(r);var h=e.apply(this,o);return n.cache=a.set(r,h)||a,h};return n.cache=new(ye.Cache||F),n}ye.Cache=F;var fo=500;function mo(e){var t=ye(e,function(o){return n.size===fo&&n.clear(),o}),n=t.cache;return t}var ho=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vo=/\\(\\)?/g,go=mo(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(ho,function(n,o,r,a){t.push(r?a.replace(vo,"$1"):o||n)}),t});const _o=go;function wo(e){return e==null?"":et(e)}function yo(e,t){return we(e)?e:Fn(e,t)?[e]:_o(wo(e))}var Co=1/0;function bo(e){if(typeof e=="string"||_e(e))return e;var t=e+"";return t=="0"&&1/e==-Co?"-0":t}function Ao(e,t){t=yo(t,e);for(var n=0,o=t.length;e!=null&&n<o;)e=e[bo(t[n++])];return n&&n==o?e:void 0}function Eo(e,t,n){var o=e==null?void 0:Ao(e,t);return o===void 0?n:o}function So(e){for(var t=-1,n=e==null?0:e.length,o={};++t<n;){var r=e[t];o[r[0]]=r[1]}return o}const xo=e=>e===void 0,ot=e=>typeof e=="number",Fe=e=>typeof Element>"u"?!1:e instanceof Element,Io=e=>he(e)?!Number.isNaN(Number(e)):!1,je=e=>Object.keys(e);function To(e,t="px"){if(!e)return"";if(ot(e)||Io(e))return`${e}${t}`;if(he(e))return e}/*! Element Plus Icons Vue v2.1.0 */var q=(e,t)=>{let n=e.__vccOpts||e;for(let[o,r]of t)n[o]=r;return n},Mo={name:"CircleCloseFilled"},Po={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Lo=m("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336L512 457.664z"},null,-1),Oo=[Lo];function No(e,t,n,o,r,a){return A(),I("svg",Po,Oo)}var Ro=q(Mo,[["render",No],["__file","circle-close-filled.vue"]]),Do={name:"Close"},$o={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Fo=m("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),jo=[Fo];function ko(e,t,n,o,r,a){return A(),I("svg",$o,jo)}var Bo=q(Do,[["render",ko],["__file","close.vue"]]),zo={name:"InfoFilled"},Go={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Uo=m("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),Ho=[Uo];function Vo(e,t,n,o,r,a){return A(),I("svg",Go,Ho)}var Wo=q(zo,[["render",Vo],["__file","info-filled.vue"]]),Qo={name:"SuccessFilled"},Ko={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Jo=m("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),qo=[Jo];function Zo(e,t,n,o,r,a){return A(),I("svg",Ko,qo)}var Yo=q(Qo,[["render",Zo],["__file","success-filled.vue"]]),Xo={name:"WarningFilled"},ea={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ta=m("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256zm0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4z"},null,-1),na=[ta];function oa(e,t,n,o,r,a){return A(),I("svg",ea,na)}var aa=q(Xo,[["render",oa],["__file","warning-filled.vue"]]);const at="__epPropKey",K=e=>e,ra=e=>He(e)&&!!e[at],rt=(e,t)=>{if(!He(e)||ra(e))return e;const{values:n,required:o,default:r,type:a,validator:h}=e,u={type:a,required:!!o,validator:n||h?g=>{let y=!1,_=[];if(n&&(_=Array.from(n),Ce(e,"default")&&_.push(r),y||(y=_.includes(g))),h&&(y||(y=h(g))),!y&&_.length>0){const E=[...new Set(_)].map(T=>JSON.stringify(T)).join(", ");bt(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${E}], got value ${JSON.stringify(g)}.`)}return y}:void 0,[at]:!0};return Ce(e,"default")&&(u.default=r),u},st=e=>So(Object.entries(e).map(([t,n])=>[t,rt(n,t)])),sa=K([String,Object,Function]),ia={Close:Bo},ke={success:Yo,warning:aa,error:Ro,info:Wo},la=(e,t)=>{if(e.install=n=>{for(const o of[e,...Object.values(t??{})])n.component(o.name,o)},t)for(const[n,o]of Object.entries(t))e[n]=o;return e},ca=(e,t)=>(e.install=n=>{e._context=n._context,n.config.globalProperties[t]=e},e),ce={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},ua=["","default","small","large"];var da={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const pa=e=>(t,n)=>fa(t,n,w(e)),fa=(e,t,n)=>Eo(n,e,e).replace(/\{(\w+)\}/g,(o,r)=>{var a;return`${(a=t==null?void 0:t[r])!=null?a:`{${r}}`}`}),ma=e=>{const t=b(()=>w(e).name),n=D(e)?e:P(e);return{lang:t,locale:n,t:pa(e)}},it=Symbol("localeContextKey"),ha=e=>{const t=e||oe(it,P());return ma(b(()=>t.value||da))},fe="el",va="is-",R=(e,t,n,o,r)=>{let a=`${e}-${t}`;return n&&(a+=`-${n}`),o&&(a+=`__${o}`),r&&(a+=`--${r}`),a},lt=Symbol("namespaceContextKey"),ga=e=>{const t=e||oe(lt,P(fe));return b(()=>w(t)||fe)},ct=(e,t)=>{const n=ga(t);return{namespace:n,b:(v="")=>R(n.value,e,v,"",""),e:v=>v?R(n.value,e,"",v,""):"",m:v=>v?R(n.value,e,"","",v):"",be:(v,c)=>v&&c?R(n.value,e,v,c,""):"",em:(v,c)=>v&&c?R(n.value,e,"",v,c):"",bm:(v,c)=>v&&c?R(n.value,e,v,"",c):"",bem:(v,c,l)=>v&&c&&l?R(n.value,e,v,c,l):"",is:(v,...c)=>{const l=c.length>=1?c[0]:!0;return v&&l?`${va}${v}`:""},cssVar:v=>{const c={};for(const l in v)v[l]&&(c[`--${n.value}-${l}`]=v[l]);return c},cssVarName:v=>`--${n.value}-${v}`,cssVarBlock:v=>{const c={};for(const l in v)v[l]&&(c[`--${n.value}-${e}-${l}`]=v[l]);return c},cssVarBlockName:v=>`--${n.value}-${e}-${v}`}},Be=P(0),ut=2e3,dt=Symbol("zIndexContextKey"),_a=e=>{const t=e||oe(dt,void 0),n=b(()=>{const a=w(t);return ot(a)?a:ut}),o=b(()=>n.value+Be.value);return{initialZIndex:n,currentZIndex:o,nextZIndex:()=>(Be.value++,o.value)}};rt({type:String,values:ua,required:!1});const wa=Symbol("size"),pt=Symbol(),te=P();function ft(e,t=void 0){const n=Ve()?oe(pt,te):te;return e?b(()=>{var o,r;return(r=(o=n.value)==null?void 0:o[e])!=null?r:t}):n}function ya(e,t){const n=ft(),o=ct(e,b(()=>{var i;return((i=n.value)==null?void 0:i.namespace)||fe})),r=ha(b(()=>{var i;return(i=n.value)==null?void 0:i.locale})),a=_a(b(()=>{var i;return((i=n.value)==null?void 0:i.zIndex)||ut})),h=b(()=>{var i;return w(t)||((i=n.value)==null?void 0:i.size)||""});return Ca(b(()=>w(n)||{})),{ns:o,locale:r,zIndex:a,size:h}}const Ca=(e,t,n=!1)=>{var o;const r=!!Ve(),a=r?ft():void 0,h=(o=t==null?void 0:t.provide)!=null?o:r?At:void 0;if(!h)return;const i=b(()=>{const u=w(e);return a!=null&&a.value?ba(a.value,u):u});return h(pt,i),h(it,b(()=>i.value.locale)),h(lt,b(()=>i.value.namespace)),h(dt,b(()=>i.value.zIndex)),h(wa,{size:b(()=>i.value.size||"")}),(n||!te.value)&&(te.value=i.value),i},ba=(e,t)=>{var n;const o=[...new Set([...je(e),...je(t)])],r={};for(const a of o)r[a]=(n=t[a])!=null?n:e[a];return r};var mt=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n};const Aa=st({size:{type:K([Number,String])},color:{type:String}}),Ea=ae({name:"ElIcon",inheritAttrs:!1}),Sa=ae({...Ea,props:Aa,setup(e){const t=e,n=ct("icon"),o=b(()=>{const{size:r,color:a}=t;return!r&&!a?{}:{fontSize:xo(r)?void 0:To(r),"--color":a}});return(r,a)=>(A(),I("i",Et({class:w(n).b(),style:w(o)},r.$attrs),[We(r.$slots,"default")],16))}});var xa=mt(Sa,[["__file","/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue"]]);const ze=la(xa),ht=["success","info","warning","error"],Ia=st({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:sa},id:{type:String,default:""},message:{type:K([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:K(Function),default:()=>{}},onClose:{type:K(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...ht,""],default:""},zIndex:{type:Number,default:0}}),Ta={destroy:()=>!0},Ma=["id"],Pa=["textContent"],La={key:0},Oa=["innerHTML"],Na=ae({name:"ElNotification"}),Ra=ae({...Na,props:Ia,emits:Ta,setup(e,{expose:t}){const n=e,{ns:o,zIndex:r}=ya("notification"),{nextZIndex:a,currentZIndex:h}=r,{Close:i}=ia,u=P(!1);let g;const y=b(()=>{const s=n.type;return s&&ke[n.type]?o.m(s):""}),_=b(()=>n.type&&ke[n.type]||n.icon),E=b(()=>n.position.endsWith("right")?"right":"left"),T=b(()=>n.position.startsWith("top")?"top":"bottom"),j=b(()=>({[T.value]:`${n.offset}px`,zIndex:h.value}));function v(){n.duration>0&&({stop:g}=zt(()=>{u.value&&l()},n.duration))}function c(){g==null||g()}function l(){u.value=!1}function p({code:s}){s===ce.delete||s===ce.backspace?c():s===ce.esc?u.value&&l():v()}return Qe(()=>{v(),a(),u.value=!0}),Ht(document,"keydown",p),t({visible:u,close:l}),(s,d)=>(A(),Z(It,{name:w(o).b("fade"),onBeforeLeave:s.onClose,onAfterLeave:d[1]||(d[1]=f=>s.$emit("destroy")),persisted:""},{default:N(()=>[L(m("div",{id:s.id,class:k([w(o).b(),s.customClass,w(E)]),style:be(w(j)),role:"alert",onMouseenter:c,onMouseleave:v,onClick:d[0]||(d[0]=(...f)=>s.onClick&&s.onClick(...f))},[w(_)?(A(),Z(w(ze),{key:0,class:k([w(o).e("icon"),w(y)])},{default:N(()=>[(A(),Z(St(w(_))))]),_:1},8,["class"])):Y("v-if",!0),m("div",{class:k(w(o).e("group"))},[m("h2",{class:k(w(o).e("title")),textContent:ue(s.title)},null,10,Pa),L(m("div",{class:k(w(o).e("content")),style:be(s.title?void 0:{margin:0})},[We(s.$slots,"default",{},()=>[s.dangerouslyUseHTMLString?(A(),I(Ke,{key:1},[Y(" Caution here, message could've been compromised, never use user's input as message "),m("p",{innerHTML:s.message},null,8,Oa)],2112)):(A(),I("p",La,ue(s.message),1))])],6),[[Ae,s.message]]),s.showClose?(A(),Z(w(ze),{key:0,class:k(w(o).e("closeBtn")),onClick:xt(l,["stop"])},{default:N(()=>[M(w(i))]),_:1},8,["class","onClick"])):Y("v-if",!0)],2)],46,Ma),[[Ae,u.value]])]),_:3},8,["name","onBeforeLeave"]))}});var Da=mt(Ra,[["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const ne={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},me=16;let $a=1;const G=function(e={},t=null){if(!re)return{close:()=>{}};(typeof e=="string"||de(e))&&(e={message:e});const n=e.position||"top-right";let o=e.offset||0;ne[n].forEach(({vm:y})=>{var _;o+=(((_=y.el)==null?void 0:_.offsetHeight)||0)+me}),o+=me;const r=`notification_${$a++}`,a=e.onClose,h={...e,offset:o,id:r,onClose:()=>{Fa(r,n,a)}};let i=document.body;Fe(e.appendTo)?i=e.appendTo:he(e.appendTo)&&(i=document.querySelector(e.appendTo)),Fe(i)||(i=document.body);const u=document.createElement("div"),g=M(Da,h,de(h.message)?{default:()=>h.message}:null);return g.appContext=t??G._context,g.props.onDestroy=()=>{Ee(null,u)},Ee(g,u),ne[n].push({vm:g}),i.appendChild(u.firstElementChild),{close:()=>{g.component.exposed.visible.value=!1}}};ht.forEach(e=>{G[e]=(t={})=>((typeof t=="string"||de(t))&&(t={message:t}),G({...t,type:e}))});function Fa(e,t,n){const o=ne[t],r=o.findIndex(({vm:g})=>{var y;return((y=g.component)==null?void 0:y.props.id)===e});if(r===-1)return;const{vm:a}=o[r];if(!a)return;n==null||n(a);const h=a.el.offsetHeight,i=t.split("-")[0];o.splice(r,1);const u=o.length;if(!(u<1))for(let g=r;g<u;g++){const{el:y,component:_}=o[g].vm,E=Number.parseInt(y.style[i],10)-h-me;_.props.offset=E}}function ja(){for(const e of Object.values(ne))e.forEach(({vm:t})=>{t.component.exposed.visible.value=!1})}G.closeAll=ja;G._context=null;const W=ca(G,"$notify");let O=Ge.create({baseURL:"/api",timeout:5e3});O.interceptors.request.use(e=>e);O.interceptors.response.use(e=>e.data,e=>{var o;let t="",n=(o=e.response)==null?void 0:o.status;if(n)switch(n){case 401:t="TOKEN 过期: "+e.response.break;case 403:t="无权访问";break;case 404:t="Not Found";break;case 500:t="服务器出现错误";break;default:t="网络出现问题";break}return W({message:t,type:"error",duration:1e3}),Promise.reject(e)});const ka={key:0,id:"panel2",class:"jy-content"},Ba={class:"title"},za=m("p",{class:"currentSelect"},"你当前选择的是：",-1),Ga={class:"currentSelectRiver"},Ua={key:0},Ha=m("p",{style:{color:"white"}},"请先命名上一级河流",-1),Va={key:1},Wa={class:"infoContainer"},Qa={class:"currentRiverName"},Ka=m("p",{class:"title"},[ee(" 当前河段名"),m("span",{style:{color:"red","font-size":"18px"}},"*"),ee("： ")],-1),Ja={class:"rely"},qa=m("p",{class:"title"},[ee(" 命名依据"),m("span",{style:{color:"red","font-size":"18px"}},"*"),ee("： ")],-1),Za=Pt('<option value="0">所在国标准地图</option><option value="1">镇志</option><option value="2">县志</option><option value="3">市志</option><option value="4">当地相传</option><option value="5">本人考察论证</option>',6),Ya=[Za],Xa={class:"riverCode"},er=m("p",{class:"title"},"中国河流代码：",-1),tr={class:"average"},nr=m("p",{class:"title"},"平均流量：",-1),or={class:"pointInfo"},ar=m("p",{class:"title"},"水文站信息：",-1),rr=m("button",null,"匹配信息",-1),sr={class:"bottom"},ir={__name:"panel",props:["showPanel","hasLast","formData"],emits:["close","namedLast"],setup(e,{emit:t}){const n=e,{zh_name:o,select_river:r,averageFlow:a,naming_reason:h,station_name:i,riverCode:u,en_name:g}=Tt(n.formData),y=[{value:"0",text:"所在国标准地图"},{value:"1",text:"镇志"},{value:"2",text:"县志"},{value:"3",text:"市志"},{value:"4",text:"当地相传"},{value:"5",text:"本人考察论证"}];let _=!1;const E=()=>{console.log(111),console.log(_),_||(o.value==""||o.value=="未命名"?W({message:"请输入河流中文名",type:"warning",duration:1e3}):h.value==""?(W({title:"Error",message:"请选择命名依据",type:"error",duration:1e3}),console.log("请选择命名依据")):(_=!0,c()))},T=()=>{let s=new Date,d=s.getFullYear(),f=s.getMonth()>=9?s.getMonth()*1+1:"0"+(s.getMonth()*1+1),C=s.getDate()>9?s.getDate():"0"+s.getDate();return d+"-"+f+"-"+C},j=()=>y.find(s=>s.value==h.value).text,v=()=>{var d,f,C;const s={rivername:o.value.replace("@","-"),discharge:a.value==""?0:a.value,channelid:(d=window.$selectedRiver)==null?void 0:d.channelid,level:(f=window==null?void 0:window.$selectedRiver)==null?void 0:f.level,hierarcode:window.$selectedRiver.hierarcode.toString(),basincode:(C=window.$selectedRiver)==null?void 0:C.basincode,shuilicode:u.value==""?"":u.value,tablelocation:window.$selectedRiver.tablelocation};O({url:"/submittmp",method:"POST",data:s}).then(S=>{console.log(S,"改名成功"),l(),_=!1}).catch(S=>{console.log(S),_=!1})},c=()=>{var d,f,C;console.log(window.$selectedRiver);const s={rivername:o.value.replace("@","-"),level:(d=window==null?void 0:window.$selectedRiver)==null?void 0:d.level,channelid:(f=window.$selectedRiver)==null?void 0:f.channelid,hierarcode:window.$selectedRiver.hierarcode.toString(),basincode:(C=window.$selectedRiver)==null?void 0:C.basincode,recorddate:T(),source:j(),shuilicode:u.value==""?"":u.value,discharge:a.value==""?0:a.value,full_name:o.value.replace("-","@"),englishname:g.value,regioncode:window.$selectedRiver.regioncode,tablelocation:window.$selectedRiver.tablelocation,riverlocation:"dongjiang_log",staionname:i.value==""?"":i.value};console.log("request"),O({url:"/submit",method:"POST",data:s}).then(S=>{t("close",!1),window.viewer.entities.removeAll(),W({message:"命名成功！",type:"success",duration:1e3}),v()}).catch(S=>{console.log(S),_=!1,W({message:"提交失败",type:"error",duration:1e3})})},l=()=>{o.value="未命名",g.value="",u.value="",a.value="",i.value=""},p=()=>{l(),t("close",!1)};return(s,d)=>n.showPanel?(A(),I("div",ka,[m("div",Ba,[za,m("p",Ga,ue(w(r)),1)]),n.hasLast?(A(),I("div",Ua,[Ha,m("button",{class:"confirm",onClick:d[0]||(d[0]=f=>s.$emit("namedLast"))},"命名上一级"),m("button",{class:"close",onClick:d[1]||(d[1]=f=>p())},"关闭")])):(A(),I("div",Va,[m("div",Wa,[m("div",Qa,[Ka,L(m("input",{type:"text",class:"firstInput","onUpdate:modelValue":d[2]||(d[2]=f=>D(o)?o.value=f:null)},null,512),[[H,w(o)]]),L(m("input",{type:"text",class:"secondInput","onUpdate:modelValue":d[3]||(d[3]=f=>D(g)?g.value=f:null)},null,512),[[H,w(g)]])]),m("div",Ja,[qa,L(m("select",{id:"selectValue","onUpdate:modelValue":d[4]||(d[4]=f=>D(h)?h.value=f:null),class:"selectList"},Ya,512),[[Mt,w(h)]])]),m("div",Xa,[er,L(m("input",{type:"text","onUpdate:modelValue":d[5]||(d[5]=f=>D(u)?u.value=f:null)},null,512),[[H,w(u)]])]),m("div",tr,[nr,L(m("input",{type:"text","onUpdate:modelValue":d[6]||(d[6]=f=>D(a)?a.value=f:null)},null,512),[[H,w(a)]])]),m("div",or,[ar,L(m("input",{type:"text",placeholder:"选填","onUpdate:modelValue":d[7]||(d[7]=f=>D(i)?i.value=f:null)},null,512),[[H,w(i)]]),rr])]),m("div",sr,[m("button",{class:"close",onClick:d[8]||(d[8]=f=>p())},"关闭"),m("button",{class:"confirm",onClick:d[9]||(d[9]=f=>E())},"确认命名")])]))])):Y("",!0)}},lr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE4AAABOCAYAAACOqiAdAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATESURBVHgB7ZxNUhs5FMcfjasMO+YE05wgsJsdpor9ZE4wnhMEbyi+qhyq+FzZnCCeEww5AJWeE4znBFFOELKDBZD/K4uE2FLb3VKrn4N+VSobqS13/1HrPT29NlEkEolEIpFIrSyQQM7OztKHh4eVJElu9vb2FAlElHAXFxfbEOwN3qbPqhXKFcqlJBFFCNftdleWlpb+wdtWzmEKZVOKeAkJAKK9o3zRmBTlA4tMAqhdOMxnbby8nvHwtNlsviEBSBhxf1IxtkkAEoRbK3LwwsLCyvHx8a9UMxKEKzxnwU1JqWYkCHdDBXl8fPxCNSNBuCEVQx0cHBT9jHckCHdU5GCMtgEJYJFq5vr6Wm1tbfE899sMh6v9/f0/SAAiHGCsBjp46U85LEPZJCGIWqvCGf5IP65Tv3F/f58eHh5+IiGIGHHzSBSuJFG4kkThSlKJcdDxNV6Mb9BoLVpHKCiDzzfE2raSAKhX4bRgb/FWROjnGf3b29sjUHh5Z8ObcLxPgJcPZHEnBKDIYwTZi3BzINoTijyJ58s4dEm+aEyK8o484CycDn23aX5o4Zxb5EiD3MkLfStYtT62/IKGgfCdq5R/F3BbRi7fQQ70er0VWKvPlmaFtnWflqwI+tx43jWG5tH2i8u5Od2q+PK8/YLNukRjOp0Of3fH1r68vLxBDrjOcampEo6niNQFnENGI0s6AadYkAOVLLkwx9Q20kJhNA5PSyaMnFe66gqR17/pBaAtLhu8lMP0d3d3701TzsSI06L9x28xcl7rMjg9PRWxEVwlEO0tjRz5NkqLr7vZbBrTLiaEg2icjpAa+u1KyduoAr366Y7XQ7w1U9qFaY4z+mW8g44OXtHPS5rTNuE9xHjcd1JbAw+a8booXEmicCXxsVYtzMnJyRqGP5v70ukMT32wz6gd3aAEFU5brm/Zl7horhtg6daZdXlmSntFH4oCp7mGvlXZR2qN1bW1EDOBY3uGPlLddzCCCQcH2uYfMq1ZkgX59iR77C/1EWeblZAjLtcHbDQaUzMzeU7La8ec6RTxKEIw4XDRuXkfiFZMnePYmOS1J0kSLGAaTDjMTfyQh7I0c/rWvzQFbYEzWx8Q9n8KRDDhOLC4uLjIuW1qrIn/LpK+9ZepD+47pFUN6o7s7OwM4U6sc/QVtybPadksI+05WpzV8/Pz33Ufyhb6qZLgDrC+wPe6lGZ3d9e5DxfikqskUbiSTAjHGy30Ail63aYRZ/WFpvli8wwMVmZr43Sx8brE0MElGfwtfLgv9WllH+h9WFPmO2cjXI5XJpYO2K8a0Gj0cXLeNtwG6+buz4J+bID9RL5udqhZSGPUpWHpQOkOXhy49gGNBk0u0aqWxEm4HEuU6qBlrehzSC3NihxwEm6KJepR/VjPwdVDcE5lxX/VFNV9IkM5Qmh8GGotqUPrvIbt5pzXEHPZOjngY63KOSUtSxvXt3AhLDBJQVtLJ3wlT+eNOmkojLZVcsSXVWXXZR6Waoo8PbrpRTj2+xBI5BNSJJcbn8FOb34cBynxson544rkkaGs63P0QiXPcmErcAPmvk2jX7CpKzWMpw5+nqtfNMo8C5U/Ic37pSF/J4R/WgPls6SnqSORSCQSiUQq4Ct16rGRqDm3KQAAAABJRU5ErkJggg==",cr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALSSURBVHgB7ZvNceIwFMcfYQ/clhLYDkgFy1aQ7WBNB3Bh+DhgX4CbsxWst4OkAkgFSQfQQTjCBfIUW0TDwcj46Ulm9JvR2JMIGP0s//VhAPB4PB6Px1OQ2qUK8/m8dTwe41qt1sbjGx77o9FoAzeGjoglHjpnf06wRLckJFdEHMfN3W73nlMlwpLcgpC7vH+ihCbkM8WynM1mf6Di3EF5WpgbCd5C6yoLoRAhkUJeRcBCxaAUIWljWaOMf1USYkKEJIAKCTEpQhJAGqg9cBgOEQKRH7HLgcolQnIaYbB0wCG4RUhaWJYu5YctEZIAHAlU2yIkAaQ9JARL6Kw11nh6aapNyQZXueF4PP4PjFxcfYphTyQ+8LPBz+0Nh8NnYOCiCMFisXjAq/QbT0Xh7B2CBBiW/FoiVCxKScCgkMIiVCxJiTC3HqMo2gIhpUSoMEshD1QyESqMUsiEGBGhwiRlhaVbJj+Mi1DBofgnDokBpJvBLaAngSsDlVWEimEphQPVmggVQ1JW2DN+6VZ2QoRKJuUJCPLkcDjcTyaTN526riy6TqAEcXFI5gj4Vt+164IDiE0aHFkestuDZGQRjydxWL3Xrf8NLHHe+LQjkLDF933c7/d/i7yIrUdMp9Nmo9FoU1/5MxJwcfiUjcdTsWFrdEKVzTBf4ErIRTA2/jMH8NArI0BCIoKz8RlbvL1C3LQplAN5XC3CQuMFpyC0ugy31PhPMgERtQCJlojsYQx74zNW9Xq9PxgMtGaI16Lz1aEQ0i+EcFN6JCiCzoSKW4KV7fxcEcxPn4wFoQ7WptgqpoNQB9siVli6eBtswDK2RLAGoQ7cIkQQ9lHAEzgGlwirQaiDaRHOC5CYFCG6f9+FINTBhAjnglAHShEiCIOqCZBQiCDfG7BB7nY+LrnzAk4EYYhPlH5UXYLA/3AlQ+fW6EK6Au3A18qwkjng8Xg8Ho+HlA8OEY0xlM+v8wAAAABJRU5ErkJggg==",ur=m("img",{src:lr,style:{width:"2rem",height:"2rem"}},null,-1),dr=m("img",{src:cr,style:{width:"2rem",height:"2rem"}},null,-1),pr={__name:"popupSearch",setup(e){const t={name:""},n=[125,Math.round(.4*window.innerHeight),Math.round(.7*window.innerHeight)],o=P(n[0]),r=()=>{o.value=n[1]},a=()=>{console.log(t.name),t.name.length>0&&Ge.post("https://eslab.dgut.edu.cn/searchDongjiangList",vt.stringify(t)).then(i=>{if(console.log("res.data.data.length",i.data.data.length),i.data.data.length==1){const u=JSON.parse(i.data.data[0].geom),g=Math.ceil(window.viewer.camera.positionCartographic.height),y=parseFloat(u[0]),_=parseFloat(u[1]);h(y,_,g)}}),t.name=""},h=(i,u,g)=>{if(g>15e3){const y=i+.1,_=u+.1,E=Math.sqrt(Math.pow(y-i,2)+Math.pow(_-u,2));viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(i,u,E*177770*1.5),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:Cesium.Math.toRadians(0)}})}else viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(i,u,g),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:Cesium.Math.toRadians(0)}})};return(i,u)=>{const g=Q("van-search"),y=Q("van-floating-panel");return A(),I("div",null,[M(y,{height:o.value,"onUpdate:height":u[1]||(u[1]=_=>o.value=_),anchors:n,"content-draggable":!1},{default:N(()=>[M(g,{modelValue:t.name,"onUpdate:modelValue":u[0]||(u[0]=_=>t.name=_),onFocus:r,placeholder:"请输入搜索关键词",onSearch:a},{"left-icon":N(()=>[ur]),"right-icon":N(()=>[dr]),_:1},8,["modelValue"])]),_:1},8,["height"])])}}};const fr={__name:"detailPanel",setup(e){const t=P(!1),n=Je({name:"",introduction:""});return Lt.config.globalProperties.$eventBus.on("detail",o=>{t.value=o.popupShow,n.name=o.info[0].name,n.introduction=o.info[0].introduction==null?"暂无数据":o.info[0].introduction,console.log("detailInfo.introduction",n.introduction)}),(o,r)=>{const a=Q("van-cell"),h=Q("van-cell-group"),i=Q("van-popup");return A(),I("div",null,[M(i,{show:t.value,"onUpdate:show":r[0]||(r[0]=u=>t.value=u),closeable:"",round:"",overlay:!1,position:"bottom",style:{height:"30%"}},{default:N(()=>[M(h,null,{default:N(()=>[M(a,{title:n.name,class:"cell_title"},null,8,["title"]),M(a,{title:n.introduction},null,8,["title"])]),_:1})]),_:1},8,["show"])])}}},mr=Ue(fr,[["__scopeId","data-v-fcf7363c"]]);const hr={id:"cesiumContainer"},wr={__name:"main",setup(e){P(!0);const t=c=>{let l=0,p=0;for(let f=0;f<c.length;f+=2)l+=c[f+1],p+=c[f];const s=l/(c.length/2);return[p/(c.length/2),s]},n=c=>{const l=t(c.scope),p=l[0],s=l[1],d=c.scope[0],f=c.scope[1],C=Math.sqrt(Math.pow(d-p,2)+Math.pow(f-s,2));window.viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(p,s,C*177770*4),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:Cesium.Math.toRadians(0)}})},o=P(!1),r=P(!1),a=Je({zh_name:"",select_river:"",averageFlow:"",naming_reason:"",station_name:"",riverCode:"",en_name:""}),h=()=>{o.value=!1};let i;const u=async c=>{const l=window.viewer.scene.globe.ellipsoid,p=window.viewer.scene.camera.pickEllipsoid(c.position,window.viewer.scene.globe.ellipsoid),s=l.cartesianToCartographic(p),d=Cesium.Math.toDegrees(s.longitude),f=Cesium.Math.toDegrees(s.latitude),C=Math.ceil(window.viewer.camera.positionCartographic.height);let S;return C>3e5&&(S=6),C<3e5&&C>2e5&&(S=5),C<=2e5&&C>1e5&&(S=4),C<=15e4&&(S=3),C<=1e5&&(S=2),C<=3e4&&(S=1),console.log(d,f,C,S,"经纬度高度层级"),O({url:"/getriver",method:"post",data:{lon:d,lat:f,index:S},headers:{"Content-Type":"application/x-www-form-urlencoded"}})},g=c=>O({url:"/getriverlog",method:"POST",data:{hierarcode:c.hierarcode,tablename:"dongjiang_log",basincode:c.basincode,regioncode:c.regioncode}}),y=c=>{let l=[],p=c.split("-");l.push(p[0]),p.forEach(d=>{l.indexOf(d)==-1&&l.push(d)});let s="";return l.forEach(d=>{s+=d+"-"}),s=s.slice(0,-1),s},_=async c=>{a.select_river="";let l=[];for(let s=0;s<c.hierarcode.length;s=s+2)l.push(c.hierarcode.slice(s,s+2));const p=await g(c);p.length==0&&l.length==1?(r.value=!1,a.zh_name="未命名",a.select_river=""):p.length!==l.length&&p.length+1==l.length?(r.value=!1,p.map((s,d)=>{const{rivername:f}=s;let C=f.indexOf("-")==-1?f:f.replace("-","@");d==p.length-1?a.select_river+=C:d!=p.length-1&&(a.select_river+=C+"-"),console.log(a.select_river,"select"),a.zh_name="未命名"}),y(a.select_river)):p.length==l.length?(r.value=!1,p.map((s,d)=>{const{rivername:f}=s;let C=f.indexOf("-")==-1?f:f.replace("-","@");d==p.length-2?a.select_river+=C:d!=p.length-2&&d!=p.length-1?a.select_river+=C+"-":d==p.length-1&&(a.zh_name=f)})):(r.value=!0,a.zh_name="未命名",E=()=>{T(c)}),o.value=!0};let E;const T=async c=>{a.select_river="",delete c.scope;const l=await O({url:"/getLastRiverLocation",method:"post",data:{...c}}),p=await O({url:"/getRiverGeom",method:"post",data:l[0]});window.$selectedRiver=p,n(p),o.value=!1,typeof p=="string"?window.viewer.entities.remove(i):(window.viewer.entities.remove(i),i=window.viewer.entities.add({name:"Red line on the surface",polyline:{positions:Cesium.Cartesian3.fromDegreesArray(p.scope),followSurface:!1,width:7,material:new Cesium.PolylineOutlineMaterialProperty({color:Cesium.Color.ORANGE,outlineWidth:7,outlineColor:Cesium.Color.RED}),depthFailMaterial:new Cesium.PolylineOutlineMaterialProperty({color:Cesium.Color.RED,outlineWidth:7,outlineColor:Cesium.Color.RED})}}),_(l[0]))},j=()=>{new Cesium.ScreenSpaceEventHandler(window.viewer.scene.canvas).setInputAction(function(l){pe(async function(){window.viewer.entities.remove(i);const p=await u(l);console.log(p),p.code==2e4&&(r.value=!1,n(p.data),window.$selectedRiver=p.data,i=window.viewer.entities.add({name:"Red line on the surface",polyline:{positions:Cesium.Cartesian3.fromDegreesArray(p.data.scope),followSurface:!1,width:4,material:new Cesium.PolylineOutlineMaterialProperty({color:Cesium.Color.RED,outlineWidth:2,outlineColor:Cesium.Color.RED}),depthFailMaterial:new Cesium.PolylineOutlineMaterialProperty({color:Cesium.Color.RED,outlineWidth:2,outlineColor:Cesium.Color.RED})}}),_(p.data))},500)()},Cesium.ScreenSpaceEventType.RIGHT_CLICK)},v=()=>{new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas).setInputAction(function(l){pe(async function(){window.viewer.entities.remove(i);const p=await u(l);if(console.log("res",p),p.code==2e4){n(p.data),window.$selectedRiver=p.data;let s=window.viewer.entities.add({name:"Red line on the surface",polyline:{positions:Cesium.Cartesian3.fromDegreesArray(p.data.scope),followSurface:!1,width:4,material:new Cesium.PolylineOutlineMaterialProperty({color:Cesium.Color.RED,outlineWidth:2,outlineColor:Cesium.Color.RED}),depthFailMaterial:new Cesium.PolylineOutlineMaterialProperty({color:Cesium.Color.RED,outlineWidth:2,outlineColor:Cesium.Color.RED})}});console.log(s),i=s}},500)()},Cesium.ScreenSpaceEventType.LEFT_CLICK)};return Qe(()=>{Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI5ZGE0MzdlZC00NGFhLTQ3ODItODQyNC01MTVlMmZiMjA4NDciLCJpZCI6NzU4ODIsImlhdCI6MTYzODk1MDcyM30.aB08DKXLq43IEtIjXrkeDMm4GYmtr9GjfDWnHWumWF0";const c={showRenderLoopErrors:!1,requestRenderMode:!0,maximumRenderTimeChange:1/0,animation:!1,baseLayerPicker:!1,fullscreenButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,shouldAnimate:!0,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,vrButton:!1,scene3DOnly:!0,fullscreenElement:document.body,orderIndependentTranslucency:!1,navigationInstructionsInitiallyVisible:!1},l=new Cesium.Viewer("cesiumContainer",c);l.scene.debugShowFramesPerSecond=!0,l.shadows=!0,l.scene.fxaa=!0,l.scene.postProcessStages.fxaa.enabled=!0,l.scene.debugShowFramesPerSecond=!1,l.scene.globe.enableLighting=!1,l.scene.logarithmicDepthBuffer=!0,l.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),l._cesiumWidget._creditContainer.style.display="none",l.camera.setView({destination:Cesium.Cartesian3.fromDegrees(114.72537169973519,23.924765567670345,628624),orientation:{heading:Cesium.Math.toRadians(360),pitch:Cesium.Math.toRadians(-90),roll:Cesium.Math.toRadians(0)}}),window.viewer=l,window.Cesium=Cesium,new Cesium.WebMapServiceImageryProvider({url:"https://eslab2.dgut.edu.cn/geoserver/dongjiang/wms",layers:"dongjiang:dongjiang_bound7",parameters:{service:"WMS",format:"image/png",transparent:!0}}),l.scene.screenSpaceCameraController.minimumZoomDistance=2e3,Nt(),v(),j(),gt()}),(c,l)=>(A(),I(Ke,null,[m("div",hr,[M(Ft),M(ir,{"show-panel":o.value,"has-last":r.value,"form-data":a,onClose:h,onNamedLast:w(E)},null,8,["show-panel","has-last","form-data","onNamedLast"])]),M(pr,{id:"popup_search"}),M(mr,{id:"detail_panel"})],64))}};export{wr as default};
