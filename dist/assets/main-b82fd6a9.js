import{a as Je,q as Ct,s as bt}from"./displayArea-2075d80b.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";import{o as b,c as x,a as l,u as y,g as At,b as St,r as L,d as xt,w as Et,i as ye,e as qe,h as Le,f as It,j as le,k as S,l as F,p as Tt,m as Ze,n as ce,q as Ye,s as Lt,t as Xe,v as oe,x as P,y as O,z as $,A as me,B as Mt,C as ae,D as G,F as Y,E as Me,G as Pt,H as M,T as Ot,I as ve,J as Pe,K as $t,L as Q,M as Rt,N as Ce,O as be,P as se,Q as Nt,R as Ae,S as U,U as et,V as Dt,W as Ft}from"./index-b960ddb6.js";function tt(e,t){return window.viewer.imageryLayers.addImageryProvider(new Cesium.WebMapServiceImageryProvider({url:e,layers:t,alpha:0,parameters:{service:"WMS",format:"image/png",transparent:!0},show:!1}))}let q=[,-1,-1,-1,-1,-1,-1,-1];function B(e,t=!0){q.forEach((n,o)=>{o!=0&&(n.show=!1)}),q[e].show=t}let Oe;function jt(){const e=window.viewer.imageryLayers.indexOf(Oe);e==-1?Oe=tt("http://172.27.101.19:8080/geoserver/dongjiang/wms","dongjiang:dongjiang_reservoirs_total"):window.viewer.imageryLayers.get(e).show=!window.viewer.imageryLayers.get(e).show}function kt(){for(let e=1;e<q.length;e++)q[e]=tt("http://172.27.101.19:8080/geoserver/dongjiang/wms",`dongjiang:dongjiang_river${e}`),q[e].show=!1;B(5,!0),window.viewer.scene.camera.changed.addEventListener(function(){let e=Math.ceil(window.viewer.camera.positionCartographic.height),t=window.viewer.camera.pickEllipsoid(new Cesium.Cartesian2(window.viewer.canvas.clientWidth/2,window.viewer.canvas.clientHeight/2)),n=Cesium.Ellipsoid.WGS84.cartesianToCartographic(t);n.longitude*180/Math.PI,n.latitude*180/Math.PI,e>620256&&ge(function(){window.viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(114.50734815163804,23.76178676036698,751048),duration:.5})},500)(),e>2e5&&e<3e5?B(4):e<=2e5&&e>1e5?B(3):e<=1e5&&e>3e4?B(2):e<=3e4?B(1):B(5)})}let $e="";function Bt(){const e=window.viewer.imageryLayers.indexOf($e);e==-1?$e=window.viewer.imageryLayers.addImageryProvider(new Cesium.WebMapTileServiceImageryProvider({url:"http://{s}.tianditu.gov.cn/cia_c/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=cia&tileMatrixSet=c&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default&format=tiles&tk=a5ef217ac65d9c8323d15a22f98c5c66",layer:"tdtCva",style:"default",format:"tiles",tileMatrixSetID:"c",subdomains:["t0","t1","t2","t3","t4","t5","t6","t7"],tilingScheme:new Cesium.GeographicTilingScheme,tileMatrixLabels:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],maximumLevel:18})):window.viewer.imageryLayers.get(e).show=!window.viewer.imageryLayers.get(e).show}let z;function ge(e,t,n=!0){return function(){if(z&&clearTimeout(z),n){var o=!z;z=setTimeout(()=>{z=null},t),o&&e.apply(this,arguments)}else z=setTimeout(function(){e.apply(context,args)},t)}}const zt={class:"layout-tool-template modelToolBar"},Ut={__name:"loadRiver",setup(e){return(t,n)=>(b(),x("div",zt,[l("button",{onClick:n[0]||(n[0]=o=>y(Bt)())},"地图标注"),l("button",{onClick:n[1]||(n[1]=o=>y(jt)())},"显示水库")]))}},Gt=ee(Ut,[["__scopeId","data-v-3997a247"]]);var Re;const ue=typeof window<"u",Ht=e=>typeof e=="string",Vt=()=>{};ue&&((Re=window==null?void 0:window.navigator)!=null&&Re.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Se(e){return typeof e=="function"?e():y(e)}function Wt(e){return e}function nt(e){return At()?(St(e),!0):!1}function Qt(e,t,n={}){const{immediate:o=!0}=n,s=L(!1);let a=null;function p(){a&&(clearTimeout(a),a=null)}function i(){s.value=!1,p()}function m(...w){p(),s.value=!0,a=setTimeout(()=>{s.value=!1,a=null,e(...w)},Se(t))}return o&&(s.value=!0,ue&&m()),nt(i),{isPending:xt(s),start:m,stop:i}}function Kt(e){var t;const n=Se(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Jt=ue?window:void 0;function qt(...e){let t,n,o,s;if(Ht(e[0])||Array.isArray(e[0])?([n,o,s]=e,t=Jt):[t,n,o,s]=e,!t)return Vt;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],p=()=>{a.forEach(_=>_()),a.length=0},i=(_,g,A,E)=>(_.addEventListener(g,A,E),()=>_.removeEventListener(g,A,E)),m=Et(()=>[Kt(t),Se(s)],([_,g])=>{p(),_&&a.push(...n.flatMap(A=>o.map(E=>i(_,A,E,g))))},{immediate:!0,flush:"post"}),w=()=>{m(),p()};return nt(w),w}const Ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},De="__vueuse_ssr_handlers__";Ne[De]=Ne[De]||{};var Fe;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(Fe||(Fe={}));var Zt=Object.defineProperty,je=Object.getOwnPropertySymbols,Yt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable,ke=(e,t,n)=>t in e?Zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,en=(e,t)=>{for(var n in t||(t={}))Yt.call(t,n)&&ke(e,n,t[n]);if(je)for(var n of je(t))Xt.call(t,n)&&ke(e,n,t[n]);return e};const tn={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};en({linear:Wt},tn);var nn=typeof global=="object"&&global&&global.Object===Object&&global;const on=nn;var an=typeof self=="object"&&self&&self.Object===Object&&self,sn=on||an||Function("return this")();const xe=sn;var rn=xe.Symbol;const H=rn;var ot=Object.prototype,ln=ot.hasOwnProperty,cn=ot.toString,K=H?H.toStringTag:void 0;function un(e){var t=ln.call(e,K),n=e[K];try{e[K]=void 0;var o=!0}catch{}var s=cn.call(e);return o&&(t?e[K]=n:delete e[K]),s}var dn=Object.prototype,pn=dn.toString;function fn(e){return pn.call(e)}var hn="[object Null]",mn="[object Undefined]",Be=H?H.toStringTag:void 0;function at(e){return e==null?e===void 0?mn:hn:Be&&Be in Object(e)?un(e):fn(e)}function vn(e){return e!=null&&typeof e=="object"}var gn="[object Symbol]";function Ee(e){return typeof e=="symbol"||vn(e)&&at(e)==gn}function _n(e,t){for(var n=-1,o=e==null?0:e.length,s=Array(o);++n<o;)s[n]=t(e[n],n,e);return s}var wn=Array.isArray;const Ie=wn;var yn=1/0,ze=H?H.prototype:void 0,Ue=ze?ze.toString:void 0;function st(e){if(typeof e=="string")return e;if(Ie(e))return _n(e,st)+"";if(Ee(e))return Ue?Ue.call(e):"";var t=e+"";return t=="0"&&1/e==-yn?"-0":t}function rt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Cn="[object AsyncFunction]",bn="[object Function]",An="[object GeneratorFunction]",Sn="[object Proxy]";function xn(e){if(!rt(e))return!1;var t=at(e);return t==bn||t==An||t==Cn||t==Sn}var En=xe["__core-js_shared__"];const fe=En;var Ge=function(){var e=/[^.]+$/.exec(fe&&fe.keys&&fe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function In(e){return!!Ge&&Ge in e}var Tn=Function.prototype,Ln=Tn.toString;function Mn(e){if(e!=null){try{return Ln.call(e)}catch{}try{return e+""}catch{}}return""}var Pn=/[\\^$.*+?()[\]{}|]/g,On=/^\[object .+?Constructor\]$/,$n=Function.prototype,Rn=Object.prototype,Nn=$n.toString,Dn=Rn.hasOwnProperty,Fn=RegExp("^"+Nn.call(Dn).replace(Pn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function jn(e){if(!rt(e)||In(e))return!1;var t=xn(e)?Fn:On;return t.test(Mn(e))}function kn(e,t){return e==null?void 0:e[t]}function it(e,t){var n=kn(e,t);return jn(n)?n:void 0}function Bn(e,t){return e===t||e!==e&&t!==t}var zn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Un=/^\w*$/;function Gn(e,t){if(Ie(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Ee(e)?!0:Un.test(e)||!zn.test(e)||t!=null&&e in Object(t)}var Hn=it(Object,"create");const X=Hn;function Vn(){this.__data__=X?X(null):{},this.size=0}function Wn(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Qn="__lodash_hash_undefined__",Kn=Object.prototype,Jn=Kn.hasOwnProperty;function qn(e){var t=this.__data__;if(X){var n=t[e];return n===Qn?void 0:n}return Jn.call(t,e)?t[e]:void 0}var Zn=Object.prototype,Yn=Zn.hasOwnProperty;function Xn(e){var t=this.__data__;return X?t[e]!==void 0:Yn.call(t,e)}var eo="__lodash_hash_undefined__";function to(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=X&&t===void 0?eo:t,this}function j(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}j.prototype.clear=Vn;j.prototype.delete=Wn;j.prototype.get=qn;j.prototype.has=Xn;j.prototype.set=to;function no(){this.__data__=[],this.size=0}function de(e,t){for(var n=e.length;n--;)if(Bn(e[n][0],t))return n;return-1}var oo=Array.prototype,ao=oo.splice;function so(e){var t=this.__data__,n=de(t,e);if(n<0)return!1;var o=t.length-1;return n==o?t.pop():ao.call(t,n,1),--this.size,!0}function ro(e){var t=this.__data__,n=de(t,e);return n<0?void 0:t[n][1]}function io(e){return de(this.__data__,e)>-1}function lo(e,t){var n=this.__data__,o=de(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}function W(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}W.prototype.clear=no;W.prototype.delete=so;W.prototype.get=ro;W.prototype.has=io;W.prototype.set=lo;var co=it(xe,"Map");const uo=co;function po(){this.size=0,this.__data__={hash:new j,map:new(uo||W),string:new j}}function fo(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function pe(e,t){var n=e.__data__;return fo(t)?n[typeof t=="string"?"string":"hash"]:n.map}function ho(e){var t=pe(this,e).delete(e);return this.size-=t?1:0,t}function mo(e){return pe(this,e).get(e)}function vo(e){return pe(this,e).has(e)}function go(e,t){var n=pe(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}function k(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}k.prototype.clear=po;k.prototype.delete=ho;k.prototype.get=mo;k.prototype.has=vo;k.prototype.set=go;var _o="Expected a function";function Te(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(_o);var n=function(){var o=arguments,s=t?t.apply(this,o):o[0],a=n.cache;if(a.has(s))return a.get(s);var p=e.apply(this,o);return n.cache=a.set(s,p)||a,p};return n.cache=new(Te.Cache||k),n}Te.Cache=k;var wo=500;function yo(e){var t=Te(e,function(o){return n.size===wo&&n.clear(),o}),n=t.cache;return t}var Co=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bo=/\\(\\)?/g,Ao=yo(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Co,function(n,o,s,a){t.push(s?a.replace(bo,"$1"):o||n)}),t});const So=Ao;function xo(e){return e==null?"":st(e)}function Eo(e,t){return Ie(e)?e:Gn(e,t)?[e]:So(xo(e))}var Io=1/0;function To(e){if(typeof e=="string"||Ee(e))return e;var t=e+"";return t=="0"&&1/e==-Io?"-0":t}function Lo(e,t){t=Eo(t,e);for(var n=0,o=t.length;e!=null&&n<o;)e=e[To(t[n++])];return n&&n==o?e:void 0}function Mo(e,t,n){var o=e==null?void 0:Lo(e,t);return o===void 0?n:o}function Po(e){for(var t=-1,n=e==null?0:e.length,o={};++t<n;){var s=e[t];o[s[0]]=s[1]}return o}const Oo=e=>e===void 0,lt=e=>typeof e=="number",He=e=>typeof Element>"u"?!1:e instanceof Element,$o=e=>ye(e)?!Number.isNaN(Number(e)):!1,Ve=e=>Object.keys(e);function Ro(e,t="px"){if(!e)return"";if(lt(e)||$o(e))return`${e}${t}`;if(ye(e))return e}/*! Element Plus Icons Vue v2.1.0 */var te=(e,t)=>{let n=e.__vccOpts||e;for(let[o,s]of t)n[o]=s;return n},No={name:"CircleCloseFilled"},Do={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Fo=l("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336L512 457.664z"},null,-1),jo=[Fo];function ko(e,t,n,o,s,a){return b(),x("svg",Do,jo)}var Bo=te(No,[["render",ko],["__file","circle-close-filled.vue"]]),zo={name:"Close"},Uo={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Go=l("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),Ho=[Go];function Vo(e,t,n,o,s,a){return b(),x("svg",Uo,Ho)}var Wo=te(zo,[["render",Vo],["__file","close.vue"]]),Qo={name:"InfoFilled"},Ko={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Jo=l("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),qo=[Jo];function Zo(e,t,n,o,s,a){return b(),x("svg",Ko,qo)}var Yo=te(Qo,[["render",Zo],["__file","info-filled.vue"]]),Xo={name:"SuccessFilled"},ea={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ta=l("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),na=[ta];function oa(e,t,n,o,s,a){return b(),x("svg",ea,na)}var aa=te(Xo,[["render",oa],["__file","success-filled.vue"]]),sa={name:"WarningFilled"},ra={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ia=l("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256zm0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4z"},null,-1),la=[ia];function ca(e,t,n,o,s,a){return b(),x("svg",ra,la)}var ua=te(sa,[["render",ca],["__file","warning-filled.vue"]]);const ct="__epPropKey",Z=e=>e,da=e=>qe(e)&&!!e[ct],ut=(e,t)=>{if(!qe(e)||da(e))return e;const{values:n,required:o,default:s,type:a,validator:p}=e,m={type:a,required:!!o,validator:n||p?w=>{let _=!1,g=[];if(n&&(g=Array.from(n),Le(e,"default")&&g.push(s),_||(_=g.includes(w))),p&&(_||(_=p(w))),!_&&g.length>0){const A=[...new Set(g)].map(E=>JSON.stringify(E)).join(", ");It(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${A}], got value ${JSON.stringify(w)}.`)}return _}:void 0,[ct]:!0};return Le(e,"default")&&(m.default=s),m},dt=e=>Po(Object.entries(e).map(([t,n])=>[t,ut(n,t)])),pa=Z([String,Object,Function]),fa={Close:Wo},We={success:aa,warning:ua,error:Bo,info:Yo},ha=(e,t)=>{if(e.install=n=>{for(const o of[e,...Object.values(t??{})])n.component(o.name,o)},t)for(const[n,o]of Object.entries(t))e[n]=o;return e},ma=(e,t)=>(e.install=n=>{e._context=n._context,n.config.globalProperties[t]=e},e),he={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},va=["","default","small","large"];var ga={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const _a=e=>(t,n)=>wa(t,n,y(e)),wa=(e,t,n)=>Mo(n,e,e).replace(/\{(\w+)\}/g,(o,s)=>{var a;return`${(a=t==null?void 0:t[s])!=null?a:`{${s}}`}`}),ya=e=>{const t=S(()=>y(e).name),n=F(e)?e:L(e);return{lang:t,locale:n,t:_a(e)}},pt=Symbol("localeContextKey"),Ca=e=>{const t=e||le(pt,L());return ya(S(()=>t.value||ga))},_e="el",ba="is-",D=(e,t,n,o,s)=>{let a=`${e}-${t}`;return n&&(a+=`-${n}`),o&&(a+=`__${o}`),s&&(a+=`--${s}`),a},ft=Symbol("namespaceContextKey"),Aa=e=>{const t=e||le(ft,L(_e));return S(()=>y(t)||_e)},ht=(e,t)=>{const n=Aa(t);return{namespace:n,b:(v="")=>D(n.value,e,v,"",""),e:v=>v?D(n.value,e,"",v,""):"",m:v=>v?D(n.value,e,"","",v):"",be:(v,u)=>v&&u?D(n.value,e,v,u,""):"",em:(v,u)=>v&&u?D(n.value,e,"",v,u):"",bm:(v,u)=>v&&u?D(n.value,e,v,"",u):"",bem:(v,u,c)=>v&&u&&c?D(n.value,e,v,u,c):"",is:(v,...u)=>{const c=u.length>=1?u[0]:!0;return v&&c?`${ba}${v}`:""},cssVar:v=>{const u={};for(const c in v)v[c]&&(u[`--${n.value}-${c}`]=v[c]);return u},cssVarName:v=>`--${n.value}-${v}`,cssVarBlock:v=>{const u={};for(const c in v)v[c]&&(u[`--${n.value}-${e}-${c}`]=v[c]);return u},cssVarBlockName:v=>`--${n.value}-${e}-${v}`}},Qe=L(0),mt=2e3,vt=Symbol("zIndexContextKey"),Sa=e=>{const t=e||le(vt,void 0),n=S(()=>{const a=y(t);return lt(a)?a:mt}),o=S(()=>n.value+Qe.value);return{initialZIndex:n,currentZIndex:o,nextZIndex:()=>(Qe.value++,o.value)}};ut({type:String,values:va,required:!1});const xa=Symbol("size"),gt=Symbol(),re=L();function _t(e,t=void 0){const n=Ze()?le(gt,re):re;return e?S(()=>{var o,s;return(s=(o=n.value)==null?void 0:o[e])!=null?s:t}):n}function Ea(e,t){const n=_t(),o=ht(e,S(()=>{var i;return((i=n.value)==null?void 0:i.namespace)||_e})),s=Ca(S(()=>{var i;return(i=n.value)==null?void 0:i.locale})),a=Sa(S(()=>{var i;return((i=n.value)==null?void 0:i.zIndex)||mt})),p=S(()=>{var i;return y(t)||((i=n.value)==null?void 0:i.size)||""});return Ia(S(()=>y(n)||{})),{ns:o,locale:s,zIndex:a,size:p}}const Ia=(e,t,n=!1)=>{var o;const s=!!Ze(),a=s?_t():void 0,p=(o=t==null?void 0:t.provide)!=null?o:s?Tt:void 0;if(!p)return;const i=S(()=>{const m=y(e);return a!=null&&a.value?Ta(a.value,m):m});return p(gt,i),p(pt,S(()=>i.value.locale)),p(ft,S(()=>i.value.namespace)),p(vt,S(()=>i.value.zIndex)),p(xa,{size:S(()=>i.value.size||"")}),(n||!re.value)&&(re.value=i.value),i},Ta=(e,t)=>{var n;const o=[...new Set([...Ve(e),...Ve(t)])],s={};for(const a of o)s[a]=(n=t[a])!=null?n:e[a];return s};var wt=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n};const La=dt({size:{type:Z([Number,String])},color:{type:String}}),Ma=ce({name:"ElIcon",inheritAttrs:!1}),Pa=ce({...Ma,props:La,setup(e){const t=e,n=ht("icon"),o=S(()=>{const{size:s,color:a}=t;return!s&&!a?{}:{fontSize:Oo(s)?void 0:Ro(s),"--color":a}});return(s,a)=>(b(),x("i",Lt({class:y(n).b(),style:y(o)},s.$attrs),[Ye(s.$slots,"default")],16))}});var Oa=wt(Pa,[["__file","/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue"]]);const Ke=ha(Oa),yt=["success","info","warning","error"],$a=dt({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:pa},id:{type:String,default:""},message:{type:Z([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:Z(Function),default:()=>{}},onClose:{type:Z(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...yt,""],default:""},zIndex:{type:Number,default:0}}),Ra={destroy:()=>!0},Na=["id"],Da=["textContent"],Fa={key:0},ja=["innerHTML"],ka=ce({name:"ElNotification"}),Ba=ce({...ka,props:$a,emits:Ra,setup(e,{expose:t}){const n=e,{ns:o,zIndex:s}=Ea("notification"),{nextZIndex:a,currentZIndex:p}=s,{Close:i}=fa,m=L(!1);let w;const _=S(()=>{const r=n.type;return r&&We[n.type]?o.m(r):""}),g=S(()=>n.type&&We[n.type]||n.icon),A=S(()=>n.position.endsWith("right")?"right":"left"),E=S(()=>n.position.startsWith("top")?"top":"bottom"),I=S(()=>({[E.value]:`${n.offset}px`,zIndex:p.value}));function v(){n.duration>0&&({stop:w}=Qt(()=>{m.value&&c()},n.duration))}function u(){w==null||w()}function c(){m.value=!1}function f({code:r}){r===he.delete||r===he.backspace?u():r===he.esc?m.value&&c():v()}return Xe(()=>{v(),a(),m.value=!0}),qt(document,"keydown",f),t({visible:m,close:c}),(r,d)=>(b(),oe(Ot,{name:y(o).b("fade"),onBeforeLeave:r.onClose,onAfterLeave:d[1]||(d[1]=h=>r.$emit("destroy")),persisted:""},{default:P(()=>[O(l("div",{id:r.id,class:$([y(o).b(),r.customClass,y(A)]),style:me(y(I)),role:"alert",onMouseenter:u,onMouseleave:v,onClick:d[0]||(d[0]=(...h)=>r.onClick&&r.onClick(...h))},[y(g)?(b(),oe(y(Ke),{key:0,class:$([y(o).e("icon"),y(_)])},{default:P(()=>[(b(),oe(Mt(y(g))))]),_:1},8,["class"])):ae("v-if",!0),l("div",{class:$(y(o).e("group"))},[l("h2",{class:$(y(o).e("title")),textContent:G(r.title)},null,10,Da),O(l("div",{class:$(y(o).e("content")),style:me(r.title?void 0:{margin:0})},[Ye(r.$slots,"default",{},()=>[r.dangerouslyUseHTMLString?(b(),x(Y,{key:1},[ae(" Caution here, message could've been compromised, never use user's input as message "),l("p",{innerHTML:r.message},null,8,ja)],2112)):(b(),x("p",Fa,G(r.message),1))])],6),[[Me,r.message]]),r.showClose?(b(),oe(y(Ke),{key:0,class:$(y(o).e("closeBtn")),onClick:Pt(c,["stop"])},{default:P(()=>[M(y(i))]),_:1},8,["class","onClick"])):ae("v-if",!0)],2)],46,Na),[[Me,m.value]])]),_:3},8,["name","onBeforeLeave"]))}});var za=wt(Ba,[["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const ie={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},we=16;let Ua=1;const V=function(e={},t=null){if(!ue)return{close:()=>{}};(typeof e=="string"||ve(e))&&(e={message:e});const n=e.position||"top-right";let o=e.offset||0;ie[n].forEach(({vm:_})=>{var g;o+=(((g=_.el)==null?void 0:g.offsetHeight)||0)+we}),o+=we;const s=`notification_${Ua++}`,a=e.onClose,p={...e,offset:o,id:s,onClose:()=>{Ga(s,n,a)}};let i=document.body;He(e.appendTo)?i=e.appendTo:ye(e.appendTo)&&(i=document.querySelector(e.appendTo)),He(i)||(i=document.body);const m=document.createElement("div"),w=M(za,p,ve(p.message)?{default:()=>p.message}:null);return w.appContext=t??V._context,w.props.onDestroy=()=>{Pe(null,m)},Pe(w,m),ie[n].push({vm:w}),i.appendChild(m.firstElementChild),{close:()=>{w.component.exposed.visible.value=!1}}};yt.forEach(e=>{V[e]=(t={})=>((typeof t=="string"||ve(t))&&(t={message:t}),V({...t,type:e}))});function Ga(e,t,n){const o=ie[t],s=o.findIndex(({vm:w})=>{var _;return((_=w.component)==null?void 0:_.props.id)===e});if(s===-1)return;const{vm:a}=o[s];if(!a)return;n==null||n(a);const p=a.el.offsetHeight,i=t.split("-")[0];o.splice(s,1);const m=o.length;if(!(m<1))for(let w=s;w<m;w++){const{el:_,component:g}=o[w].vm,A=Number.parseInt(_.style[i],10)-p-we;g.props.offset=A}}function Ha(){for(const e of Object.values(ie))e.forEach(({vm:t})=>{t.component.exposed.visible.value=!1})}V.closeAll=Ha;V._context=null;const J=ma(V,"$notify");let R=Je.create({baseURL:"/api",timeout:5e3});R.interceptors.request.use(e=>e);R.interceptors.response.use(e=>e.data,e=>{var o;let t="",n=(o=e.response)==null?void 0:o.status;if(n)switch(n){case 401:t="TOKEN 过期: "+e.response.break;case 403:t="无权访问";break;case 404:t="Not Found";break;case 500:t="服务器出现错误";break;default:t="网络出现问题";break}return J({message:t,type:"error",duration:1e3}),Promise.reject(e)});const N=e=>(Ce("data-v-16a31967"),e=e(),be(),e),Va={key:0,id:"panel2",class:"jy-content"},Wa={class:"title"},Qa=N(()=>l("p",{class:"currentSelect"},"你当前选择的是：",-1)),Ka={class:"currentSelectRiver"},Ja={key:0},qa=N(()=>l("p",{style:{color:"white"}},"请先命名上一级河流",-1)),Za={key:1},Ya={class:"infoContainer"},Xa={class:"currentRiverName"},es=N(()=>l("p",{class:"title"},[se(" 当前河段名"),l("span",{style:{color:"red","font-size":"18px"}},"*"),se("： ")],-1)),ts={class:"rely"},ns=N(()=>l("p",{class:"title"},[se(" 命名依据"),l("span",{style:{color:"red","font-size":"18px"}},"*"),se("： ")],-1)),os=Nt('<option value="0" data-v-16a31967>所在国标准地图</option><option value="1" data-v-16a31967>镇志</option><option value="2" data-v-16a31967>县志</option><option value="3" data-v-16a31967>市志</option><option value="4" data-v-16a31967>当地相传</option><option value="5" data-v-16a31967>本人考察论证</option>',6),as=[os],ss={class:"riverCode"},rs=N(()=>l("p",{class:"title"},"中国河流代码：",-1)),is={class:"average"},ls=N(()=>l("p",{class:"title"},"平均流量：",-1)),cs={class:"pointInfo"},us=N(()=>l("p",{class:"title"},"水文站信息：",-1)),ds=N(()=>l("button",null,"匹配信息",-1)),ps={class:"bottom"},fs={__name:"panel",props:["showPanel","hasLast","formData"],emits:["close","namedLast"],setup(e,{emit:t}){const n=e,{zh_name:o,select_river:s,averageFlow:a,naming_reason:p,station_name:i,riverCode:m,en_name:w}=$t(n.formData),_=[{value:"0",text:"所在国标准地图"},{value:"1",text:"镇志"},{value:"2",text:"县志"},{value:"3",text:"市志"},{value:"4",text:"当地相传"},{value:"5",text:"本人考察论证"}];let g=!1;const A=()=>{console.log(111),console.log(g),g||(o.value==""||o.value=="未命名"?J({message:"请输入河流中文名",type:"warning",duration:1e3}):p.value==""?(J({title:"Error",message:"请选择命名依据",type:"error",duration:1e3}),console.log("请选择命名依据")):(g=!0,u()))},E=()=>{let r=new Date,d=r.getFullYear(),h=r.getMonth()>=9?r.getMonth()*1+1:"0"+(r.getMonth()*1+1),C=r.getDate()>9?r.getDate():"0"+r.getDate();return d+"-"+h+"-"+C},I=()=>_.find(r=>r.value==p.value).text,v=()=>{var d,h,C;const r={rivername:o.value.replace("@","-"),discharge:a.value==""?0:a.value,channelid:(d=window.$selectedRiver)==null?void 0:d.channelid,level:(h=window==null?void 0:window.$selectedRiver)==null?void 0:h.level,hierarcode:window.$selectedRiver.hierarcode.toString(),basincode:(C=window.$selectedRiver)==null?void 0:C.basincode,shuilicode:m.value==""?"":m.value,tablelocation:window.$selectedRiver.tablelocation};R({url:"/submittmp",method:"POST",data:r}).then(T=>{console.log(T,"改名成功"),c(),g=!1}).catch(T=>{console.log(T),g=!1})},u=()=>{var d,h,C;console.log(window.$selectedRiver);const r={rivername:o.value.replace("@","-"),level:(d=window==null?void 0:window.$selectedRiver)==null?void 0:d.level,channelid:(h=window.$selectedRiver)==null?void 0:h.channelid,hierarcode:window.$selectedRiver.hierarcode.toString(),basincode:(C=window.$selectedRiver)==null?void 0:C.basincode,recorddate:E(),source:I(),shuilicode:m.value==""?"":m.value,discharge:a.value==""?0:a.value,full_name:o.value.replace("-","@"),englishname:w.value,regioncode:window.$selectedRiver.regioncode,tablelocation:window.$selectedRiver.tablelocation,riverlocation:"dongjiang_log",staionname:i.value==""?"":i.value};console.log("request"),R({url:"/submit",method:"POST",data:r}).then(T=>{t("close",!1),window.viewer.entities.removeAll(),J({message:"命名成功！",type:"success",duration:1e3}),v()}).catch(T=>{console.log(T),g=!1,J({message:"提交失败",type:"error",duration:1e3})})},c=()=>{o.value="未命名",w.value="",m.value="",a.value="",i.value=""},f=()=>{c(),t("close",!1)};return(r,d)=>n.showPanel?(b(),x("div",Va,[l("div",Wa,[Qa,l("p",Ka,G(y(s)),1)]),n.hasLast?(b(),x("div",Ja,[qa,l("button",{class:"confirm",onClick:d[0]||(d[0]=h=>r.$emit("namedLast"))},"命名上一级"),l("button",{class:"close",onClick:d[1]||(d[1]=h=>f())},"关闭")])):(b(),x("div",Za,[l("div",Ya,[l("div",Xa,[es,O(l("input",{type:"text",class:"firstInput","onUpdate:modelValue":d[2]||(d[2]=h=>F(o)?o.value=h:null)},null,512),[[Q,y(o)]]),O(l("input",{type:"text",class:"secondInput","onUpdate:modelValue":d[3]||(d[3]=h=>F(w)?w.value=h:null)},null,512),[[Q,y(w)]])]),l("div",ts,[ns,O(l("select",{id:"selectValue","onUpdate:modelValue":d[4]||(d[4]=h=>F(p)?p.value=h:null),class:"selectList"},as,512),[[Rt,y(p)]])]),l("div",ss,[rs,O(l("input",{type:"text","onUpdate:modelValue":d[5]||(d[5]=h=>F(m)?m.value=h:null)},null,512),[[Q,y(m)]])]),l("div",is,[ls,O(l("input",{type:"text","onUpdate:modelValue":d[6]||(d[6]=h=>F(a)?a.value=h:null)},null,512),[[Q,y(a)]])]),l("div",cs,[us,O(l("input",{type:"text",placeholder:"选填","onUpdate:modelValue":d[7]||(d[7]=h=>F(i)?i.value=h:null)},null,512),[[Q,y(i)]]),ds])]),l("div",ps,[l("button",{class:"close",onClick:d[8]||(d[8]=h=>f())},"关闭"),l("button",{class:"confirm",onClick:d[9]||(d[9]=h=>A())},"确认命名")])]))])):ae("",!0)}},hs=ee(fs,[["__scopeId","data-v-16a31967"]]),ms="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE4AAABOCAYAAACOqiAdAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATESURBVHgB7ZxNUhs5FMcfjasMO+YE05wgsJsdpor9ZE4wnhMEbyi+qhyq+FzZnCCeEww5AJWeE4znBFFOELKDBZD/K4uE2FLb3VKrn4N+VSobqS13/1HrPT29NlEkEolEIpFIrSyQQM7OztKHh4eVJElu9vb2FAlElHAXFxfbEOwN3qbPqhXKFcqlJBFFCNftdleWlpb+wdtWzmEKZVOKeAkJAKK9o3zRmBTlA4tMAqhdOMxnbby8nvHwtNlsviEBSBhxf1IxtkkAEoRbK3LwwsLCyvHx8a9UMxKEKzxnwU1JqWYkCHdDBXl8fPxCNSNBuCEVQx0cHBT9jHckCHdU5GCMtgEJYJFq5vr6Wm1tbfE899sMh6v9/f0/SAAiHGCsBjp46U85LEPZJCGIWqvCGf5IP65Tv3F/f58eHh5+IiGIGHHzSBSuJFG4kkThSlKJcdDxNV6Mb9BoLVpHKCiDzzfE2raSAKhX4bRgb/FWROjnGf3b29sjUHh5Z8ObcLxPgJcPZHEnBKDIYwTZi3BzINoTijyJ58s4dEm+aEyK8o484CycDn23aX5o4Zxb5EiD3MkLfStYtT62/IKGgfCdq5R/F3BbRi7fQQ70er0VWKvPlmaFtnWflqwI+tx43jWG5tH2i8u5Od2q+PK8/YLNukRjOp0Of3fH1r68vLxBDrjOcampEo6niNQFnENGI0s6AadYkAOVLLkwx9Q20kJhNA5PSyaMnFe66gqR17/pBaAtLhu8lMP0d3d3701TzsSI06L9x28xcl7rMjg9PRWxEVwlEO0tjRz5NkqLr7vZbBrTLiaEg2icjpAa+u1KyduoAr366Y7XQ7w1U9qFaY4z+mW8g44OXtHPS5rTNuE9xHjcd1JbAw+a8booXEmicCXxsVYtzMnJyRqGP5v70ukMT32wz6gd3aAEFU5brm/Zl7horhtg6daZdXlmSntFH4oCp7mGvlXZR2qN1bW1EDOBY3uGPlLddzCCCQcH2uYfMq1ZkgX59iR77C/1EWeblZAjLtcHbDQaUzMzeU7La8ec6RTxKEIw4XDRuXkfiFZMnePYmOS1J0kSLGAaTDjMTfyQh7I0c/rWvzQFbYEzWx8Q9n8KRDDhOLC4uLjIuW1qrIn/LpK+9ZepD+47pFUN6o7s7OwM4U6sc/QVtybPadksI+05WpzV8/Pz33Ufyhb6qZLgDrC+wPe6lGZ3d9e5DxfikqskUbiSTAjHGy30Ail63aYRZ/WFpvli8wwMVmZr43Sx8brE0MElGfwtfLgv9WllH+h9WFPmO2cjXI5XJpYO2K8a0Gj0cXLeNtwG6+buz4J+bID9RL5udqhZSGPUpWHpQOkOXhy49gGNBk0u0aqWxEm4HEuU6qBlrehzSC3NihxwEm6KJepR/VjPwdVDcE5lxX/VFNV9IkM5Qmh8GGotqUPrvIbt5pzXEHPZOjngY63KOSUtSxvXt3AhLDBJQVtLJ3wlT+eNOmkojLZVcsSXVWXXZR6Waoo8PbrpRTj2+xBI5BNSJJcbn8FOb34cBynxson544rkkaGs63P0QiXPcmErcAPmvk2jX7CpKzWMpw5+nqtfNMo8C5U/Ic37pSF/J4R/WgPls6SnqSORSCQSiUQq4Ct16rGRqDm3KQAAAABJRU5ErkJggg==",vs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALSSURBVHgB7ZvNceIwFMcfYQ/clhLYDkgFy1aQ7WBNB3Bh+DhgX4CbsxWst4OkAkgFSQfQQTjCBfIUW0TDwcj46Ulm9JvR2JMIGP0s//VhAPB4PB6Px1OQ2qUK8/m8dTwe41qt1sbjGx77o9FoAzeGjoglHjpnf06wRLckJFdEHMfN3W73nlMlwpLcgpC7vH+ihCbkM8WynM1mf6Di3EF5WpgbCd5C6yoLoRAhkUJeRcBCxaAUIWljWaOMf1USYkKEJIAKCTEpQhJAGqg9cBgOEQKRH7HLgcolQnIaYbB0wCG4RUhaWJYu5YctEZIAHAlU2yIkAaQ9JARL6Kw11nh6aapNyQZXueF4PP4PjFxcfYphTyQ+8LPBz+0Nh8NnYOCiCMFisXjAq/QbT0Xh7B2CBBiW/FoiVCxKScCgkMIiVCxJiTC3HqMo2gIhpUSoMEshD1QyESqMUsiEGBGhwiRlhaVbJj+Mi1DBofgnDokBpJvBLaAngSsDlVWEimEphQPVmggVQ1JW2DN+6VZ2QoRKJuUJCPLkcDjcTyaTN526riy6TqAEcXFI5gj4Vt+164IDiE0aHFkestuDZGQRjydxWL3Xrf8NLHHe+LQjkLDF933c7/d/i7yIrUdMp9Nmo9FoU1/5MxJwcfiUjcdTsWFrdEKVzTBf4ErIRTA2/jMH8NArI0BCIoKz8RlbvL1C3LQplAN5XC3CQuMFpyC0ugy31PhPMgERtQCJlojsYQx74zNW9Xq9PxgMtGaI16Lz1aEQ0i+EcFN6JCiCzoSKW4KV7fxcEcxPn4wFoQ7WptgqpoNQB9siVli6eBtswDK2RLAGoQ7cIkQQ9lHAEzgGlwirQaiDaRHOC5CYFCG6f9+FINTBhAjnglAHShEiCIOqCZBQiCDfG7BB7nY+LrnzAk4EYYhPlH5UXYLA/3AlQ+fW6EK6Au3A18qwkjng8Xg8Ho+HlA8OEY0xlM+v8wAAAABJRU5ErkJggg==";const ne=e=>(Ce("data-v-dd143e0c"),e=e(),be(),e),gs=ne(()=>l("img",{src:ms,style:{width:"2rem",height:"2rem"}},null,-1)),_s=ne(()=>l("img",{src:vs,style:{width:"2rem",height:"2rem"}},null,-1)),ws=ne(()=>l("span",{class:"self-start text_3"},"对话记录",-1)),ys={class:"flex-col group_4 space-y-12"},Cs={class:"flex-row justify-end group_5 space-x-5"},bs={class:"flex-col justify-start items-start text-wrapper_2"},As={class:"text_4"},Ss=ne(()=>l("img",{class:"self-start image_3",src:"https://codefun-proj-user-res-1256085488.cos.ap-guangzhou.myqcloud.com/618880640163bf0011e2e0b2/64914e4f54fe0000116a6d3f/16885501565342185854.png"},null,-1)),xs={class:"flex-row items-center space-x-6"},Es=ne(()=>l("img",{class:"image_4",src:"https://codefun-proj-user-res-1256085488.cos.ap-guangzhou.myqcloud.com/618880640163bf0011e2e0b2/64914e4f54fe0000116a6d3f/16885501568338949860.png"},null,-1)),Is={class:"flex-col justify-start text-wrapper_3"},Ts={class:"font_1 text_5"},Ls={__name:"popupSearch",setup(e){const t={name:""},n=Ae([{q:"告诉我东江流域中的东源江的长度是多少",ans:"长度的值是24"}]),o=[125,Math.round(.4*window.innerHeight),Math.round(.7*window.innerHeight)],s=L(o[0]),a=L(),p=()=>{Dt(()=>{a.value.scrollTop=a.value.scrollHeight})},i=()=>{s.value=o[1]},m=()=>{p(),console.log(t.name),n.push({q:t.name}),t.name.length>0&&Je.post("https://eslab.dgut.edu.cn/searchDongjiangList",Ct.stringify(t)).then(_=>{if(console.log("res.data.data.length",_.data.data.length),_.data.data.length==1){const g=JSON.parse(_.data.data[0].geom),A=Math.ceil(window.viewer.camera.positionCartographic.height),E=parseFloat(g[0]),I=parseFloat(g[1]);w(E,I,A)}}),t.name=""},w=(_,g,A)=>{if(A>15e3){const E=_+.1,I=g+.1,v=Math.sqrt(Math.pow(E-_,2)+Math.pow(I-g,2));viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(_,g,v*177770*1.5),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:Cesium.Math.toRadians(0)}})}else viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(_,g,A),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:Cesium.Math.toRadians(0)}})};return(_,g)=>{const A=U("van-search"),E=U("van-floating-panel");return b(),x("div",null,[M(E,{height:s.value,"onUpdate:height":g[1]||(g[1]=I=>s.value=I),anchors:o,"content-draggable":!1,class:"jy-panel"},{default:P(()=>[M(A,{modelValue:t.name,"onUpdate:modelValue":g[0]||(g[0]=I=>t.name=I),onFocus:i,placeholder:"请输入搜索关键词",onSearch:m,class:"jy-search"},{"left-icon":P(()=>[gs]),"right-icon":P(()=>[_s]),_:1},8,["modelValue"]),l("div",{class:"flex-col relative section_4 space-y-16",ref_key:"chatContainer",ref:a},[ws,(b(!0),x(Y,null,et(n,I=>(b(),x("div",ys,[l("div",Cs,[l("div",bs,[l("span",As,G(I.q),1)]),Ss]),l("div",xs,[Es,l("div",Is,[l("span",Ts,G(I.ans),1)])])]))),256))],512)]),_:1},8,["height"])])}}},Ms=ee(Ls,[["__scopeId","data-v-dd143e0c"]]);const Ps={__name:"detailPanel",setup(e){const t=L(!1),n=Ae({name:"",introduction:""});return Ft.config.globalProperties.$eventBus.on("detail",o=>{t.value=o.popupShow,n.name=o.info[0].name,n.introduction=o.info[0].introduction==null?"暂无数据":o.info[0].introduction,console.log("detailInfo.introduction",n.introduction)}),(o,s)=>{const a=U("van-cell"),p=U("van-cell-group"),i=U("van-popup");return b(),x("div",null,[M(i,{show:t.value,"onUpdate:show":s[0]||(s[0]=m=>t.value=m),closeable:"",round:"",overlay:!1,position:"bottom",style:{height:"30%"}},{default:P(()=>[M(p,null,{default:P(()=>[M(a,{title:n.name,class:"cell_title"},null,8,["title"]),M(a,{title:n.introduction},null,8,["title"])]),_:1})]),_:1},8,["show"])])}}},Os=ee(Ps,[["__scopeId","data-v-fd3c8dcd"]]),$s=""+new URL("tdt-d25853ca.png",import.meta.url).href,Rs=""+new URL("tdtyx-7cb874b6.png",import.meta.url).href;const Ns=e=>(Ce("data-v-93e5f92b"),e=e(),be(),e),Ds={class:"jy-layers"},Fs={class:"jy-container"},js=Ns(()=>l("div",{class:"jy-header"},[l("strong",null,"图层")],-1)),ks={class:"jy-content"},Bs=["onClick"],zs={__name:"changeLayer",setup(e){const t=L(!1),n=L([{src:$s,isSelected:!1,name:"天地图"},{src:Rs,isSelected:!1,name:"天地图影像"}]),o=s=>{n.value.forEach((a,p)=>{a.isSelected=p===s})};return(s,a)=>{const p=U("van-popup");return b(),x(Y,null,[l("div",Ds,[l("div",{class:"jy-change",onClick:a[0]||(a[0]=i=>t.value=!t.value)})]),M(p,{show:t.value,"onUpdate:show":a[1]||(a[1]=i=>t.value=i),closeable:"",round:!0,position:"bottom",style:{height:"30%"}},{default:P(()=>[l("div",Fs,[js,l("div",ks,[(b(!0),x(Y,null,et(n.value,(i,m)=>(b(),x("div",{class:$(["jy-content__layer",{highlightLayer:i.isSelected}]),key:m,style:me({backgroundImage:`url(${i.src})`}),onClick:w=>o(m)},[l("p",{class:$(["jy-Btext",{highlight:i.isSelected}])},G(i.name),3)],14,Bs))),128))])])]),_:1},8,["show"])],64)}}},Us=ee(zs,[["__scopeId","data-v-93e5f92b"]]);const Gs={id:"cesiumContainer"},Qs={__name:"main",setup(e){L(!0);const t=u=>{let c=0,f=0;for(let h=0;h<u.length;h+=2)c+=u[h+1],f+=u[h];const r=c/(u.length/2);return[f/(u.length/2),r]},n=u=>{const c=t(u.scope),f=c[0],r=c[1],d=u.scope[0],h=u.scope[1],C=Math.sqrt(Math.pow(d-f,2)+Math.pow(h-r,2));window.viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(f,r,C*177770*4),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:Cesium.Math.toRadians(0)}})},o=L(!1),s=L(!1),a=Ae({zh_name:"",select_river:"",averageFlow:"",naming_reason:"",station_name:"",riverCode:"",en_name:""}),p=()=>{o.value=!1};let i;const m=async u=>{const c=window.viewer.scene.globe.ellipsoid,f=window.viewer.scene.camera.pickEllipsoid(u.position,window.viewer.scene.globe.ellipsoid),r=c.cartesianToCartographic(f),d=Cesium.Math.toDegrees(r.longitude),h=Cesium.Math.toDegrees(r.latitude),C=Math.ceil(window.viewer.camera.positionCartographic.height);let T;return C>3e5&&(T=6),C<3e5&&C>2e5&&(T=5),C<=2e5&&C>1e5&&(T=4),C<=15e4&&(T=3),C<=1e5&&(T=2),C<=3e4&&(T=1),console.log(d,h,C,T,"经纬度高度层级"),R({url:"/getriver",method:"post",data:{lon:d,lat:h,index:T},headers:{"Content-Type":"application/x-www-form-urlencoded"}})},w=u=>R({url:"/getriverlog",method:"POST",data:{hierarcode:u.hierarcode,tablename:"dongjiang_log",basincode:u.basincode,regioncode:u.regioncode}}),_=u=>{let c=[],f=u.split("-");c.push(f[0]),f.forEach(d=>{c.indexOf(d)==-1&&c.push(d)});let r="";return c.forEach(d=>{r+=d+"-"}),r=r.slice(0,-1),r},g=async u=>{a.select_river="";let c=[];for(let r=0;r<u.hierarcode.length;r=r+2)c.push(u.hierarcode.slice(r,r+2));const f=await w(u);f.length==0&&c.length==1?(s.value=!1,a.zh_name="未命名",a.select_river=""):f.length!==c.length&&f.length+1==c.length?(s.value=!1,f.map((r,d)=>{const{rivername:h}=r;let C=h.indexOf("-")==-1?h:h.replace("-","@");d==f.length-1?a.select_river+=C:d!=f.length-1&&(a.select_river+=C+"-"),console.log(a.select_river,"select"),a.zh_name="未命名"}),_(a.select_river)):f.length==c.length?(s.value=!1,f.map((r,d)=>{const{rivername:h}=r;let C=h.indexOf("-")==-1?h:h.replace("-","@");d==f.length-2?a.select_river+=C:d!=f.length-2&&d!=f.length-1?a.select_river+=C+"-":d==f.length-1&&(a.zh_name=h)})):(s.value=!0,a.zh_name="未命名",A=()=>{E(u)}),o.value=!0};let A;const E=async u=>{a.select_river="",delete u.scope;const c=await R({url:"/getLastRiverLocation",method:"post",data:{...u}}),f=await R({url:"/getRiverGeom",method:"post",data:c[0]});window.$selectedRiver=f,n(f),o.value=!1,typeof f=="string"?window.viewer.entities.remove(i):(window.viewer.entities.remove(i),i=window.viewer.entities.add({name:"Red line on the surface",polyline:{positions:Cesium.Cartesian3.fromDegreesArray(f.scope),followSurface:!1,width:7,material:new Cesium.PolylineOutlineMaterialProperty({color:Cesium.Color.ORANGE,outlineWidth:7,outlineColor:Cesium.Color.RED}),depthFailMaterial:new Cesium.PolylineOutlineMaterialProperty({color:Cesium.Color.RED,outlineWidth:7,outlineColor:Cesium.Color.RED})}}),g(c[0]))},I=()=>{new Cesium.ScreenSpaceEventHandler(window.viewer.scene.canvas).setInputAction(function(c){ge(async function(){window.viewer.entities.remove(i);const f=await m(c);console.log(f),f.code==2e4&&(s.value=!1,n(f.data),window.$selectedRiver=f.data,i=window.viewer.entities.add({name:"Red line on the surface",polyline:{positions:Cesium.Cartesian3.fromDegreesArray(f.data.scope),followSurface:!1,width:4,material:new Cesium.PolylineOutlineMaterialProperty({color:Cesium.Color.RED,outlineWidth:2,outlineColor:Cesium.Color.RED}),depthFailMaterial:new Cesium.PolylineOutlineMaterialProperty({color:Cesium.Color.RED,outlineWidth:2,outlineColor:Cesium.Color.RED})}}),g(f.data))},500)()},Cesium.ScreenSpaceEventType.RIGHT_CLICK)},v=()=>{new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas).setInputAction(function(c){ge(async function(){window.viewer.entities.remove(i);const f=await m(c);if(console.log("res",f),f.code==2e4){n(f.data),window.$selectedRiver=f.data;let r=window.viewer.entities.add({name:"Red line on the surface",polyline:{positions:Cesium.Cartesian3.fromDegreesArray(f.data.scope),followSurface:!1,width:4,material:new Cesium.PolylineOutlineMaterialProperty({color:Cesium.Color.RED,outlineWidth:2,outlineColor:Cesium.Color.RED}),depthFailMaterial:new Cesium.PolylineOutlineMaterialProperty({color:Cesium.Color.RED,outlineWidth:2,outlineColor:Cesium.Color.RED})}});console.log(r),i=r}},500)()},Cesium.ScreenSpaceEventType.LEFT_CLICK)};return Xe(()=>{Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI5ZGE0MzdlZC00NGFhLTQ3ODItODQyNC01MTVlMmZiMjA4NDciLCJpZCI6NzU4ODIsImlhdCI6MTYzODk1MDcyM30.aB08DKXLq43IEtIjXrkeDMm4GYmtr9GjfDWnHWumWF0";const u={showRenderLoopErrors:!1,requestRenderMode:!0,maximumRenderTimeChange:1/0,animation:!1,baseLayerPicker:!1,fullscreenButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,shouldAnimate:!0,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,vrButton:!1,scene3DOnly:!0,fullscreenElement:document.body,orderIndependentTranslucency:!1,navigationInstructionsInitiallyVisible:!1},c=new Cesium.Viewer("cesiumContainer",u);c.scene.debugShowFramesPerSecond=!0,c.shadows=!0,c.scene.fxaa=!0,c.scene.postProcessStages.fxaa.enabled=!0,c.scene.debugShowFramesPerSecond=!1,c.scene.globe.enableLighting=!1,c.scene.logarithmicDepthBuffer=!0,c.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),c._cesiumWidget._creditContainer.style.display="none",c.camera.setView({destination:Cesium.Cartesian3.fromDegrees(114.72537169973519,23.924765567670345,628624),orientation:{heading:Cesium.Math.toRadians(360),pitch:Cesium.Math.toRadians(-90),roll:Cesium.Math.toRadians(0)}}),window.viewer=c,window.Cesium=Cesium,c.scene.screenSpaceCameraController.minimumZoomDistance=2e3,kt(),v(),I(),bt()}),(u,c)=>(b(),x(Y,null,[l("div",Gs,[M(Gt),M(Us),M(hs,{"show-panel":o.value,"has-last":s.value,"form-data":a,onClose:p,onNamedLast:y(A)},null,8,["show-panel","has-last","form-data","onNamedLast"])]),M(Ms,{id:"popup_search"}),M(Os,{id:"detail_panel"})],64))}};export{Qs as default};
